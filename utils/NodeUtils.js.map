{"version":3,"sources":["utils/NodeUtils.js"],"names":["define","require","exports","module","Phoenix","browser","isTauri","UTILS_NODE_CONNECTOR","NodeConnector","utilsConnector","createNodeConnector","async","fetchURLText","url","encoding","buffer","execPeer","iconv","decode","Buffer","from"],"mappings":"AAyBAA,OAAO,SAAUC,QAASC,QAASC,QAC/B,IAAIC,QAAQC,QAAQC,QAEhB,OAEJ,MAAMC,qBAAuB,WACvBC,cAAgBP,QAAQ,iBACxBQ,eAAiBD,cAAcE,oBAFR,WAEkDR,SAE/ES,eAAeC,aAAaC,IAAKC,UAC7B,MAAMC,OAACA,cAAgBN,eAAeO,SAAS,gBAAiB,CAACH,IAAAA,MACjE,OAAOI,MAAMC,OAAOC,OAAOC,KAAKL,QAASD,UAG7CZ,QAAQU,aAAeA","sourcesContent":["/*\n * GNU AGPL-3.0 License\n *\n * Copyright (c) 2021 - present core.ai . All rights reserved.\n * Original work Copyright (c) 2012 - 2021 Adobe Systems Incorporated. All rights reserved.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License\n * for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see https://opensource.org/licenses/AGPL-3.0.\n *\n */\n\n/**\n * Generic node util APIs connector. see `src-node/utils.js` for node peer\n */\n\ndefine(function (require, exports, module) {\n    if(!Phoenix.browser.isTauri) {\n        // node not available in browser builds, return\n        return;\n    }\n    const UTILS_NODE_CONNECTOR = \"ph_utils\";\n    const NodeConnector = require('NodeConnector');\n    const utilsConnector = NodeConnector.createNodeConnector(UTILS_NODE_CONNECTOR, exports);\n\n    async function fetchURLText(url, encoding) {\n        const {buffer} = await utilsConnector.execPeer(\"getURLContent\", {url});\n        return iconv.decode(Buffer.from(buffer), encoding);\n    }\n\n    exports.fetchURLText = fetchURLText;\n});\n"],"file":"NodeUtils.js"}