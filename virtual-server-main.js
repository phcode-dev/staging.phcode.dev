importScripts("phoenix/virtualfs.js"),importScripts("phoenix/virtualServer/mime-types.js"),importScripts("phoenix/virtualServer/config.js"),importScripts("phoenix/virtualServer/content-type.js"),importScripts("phoenix/virtualServer/webserver.js"),importScripts("phoenix/virtualServer/json-formatter.js"),importScripts("phoenix/virtualServer/html-formatter.js"),importScripts("https://storage.googleapis.com/workbox-cdn/releases/4.1.1/workbox-sw.js"),workbox.setConfig({debug:Config.debug});const wwwRegex=new RegExp(`${Config.route}(/.*)`),wwwPartialRegex=new RegExp(`${Config.route}$`);workbox.routing.registerRoute(wwwRegex,({url:url})=>{let path=url.pathname.match(wwwRegex)[1];path=decodeURI(path);const formatter=null!==url.searchParams.get("json")?JSONFormatter:HtmlFormatter,download=null!==url.searchParams.get("download")||null!==url.searchParams.get("dl");return Serve.serve(path,formatter,download)},"GET"),workbox.routing.registerRoute(wwwPartialRegex,({url:url})=>(url.pathname=`${Config.route}/`,Promise.resolve(Response.redirect(url,302))),"GET"),workbox.core.skipWaiting(),workbox.core.clientsClaim();
//# sourceMappingURL=virtual-server-main.js.map
