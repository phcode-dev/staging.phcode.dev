if(!self.mime){self.mime={};let db={};fetch("thirdparty/mime-db.json").then(response=>response.json()).then(data=>{db=data,populateMaps(self.mime.extensions,self.mime.types)}).catch(err=>{console.error("could not fetch mime-deb",err)}),self.path||console.error("Phoenix fs lib should be loaded before mime type.");let extname=path.extname;var EXTRACT_TYPE_REGEXP=/^\s*([^;\s]*)(?:;|\s|$)/,TEXT_TYPE_REGEXP=/^text\//i;function charset(type){if(!type||"string"!=typeof type)return!1;var match=EXTRACT_TYPE_REGEXP.exec(type),mime=match&&db[match[1].toLowerCase()];return mime&&mime.charset?mime.charset:!(!match||!TEXT_TYPE_REGEXP.test(match[1]))&&"UTF-8"}function contentType(str){if(!str||"string"!=typeof str)return!1;var mime=-1===str.indexOf("/")?self.mime.lookup(str):str;if(!mime)return!1;if(-1===mime.indexOf("charset")){var charset=self.mime.charset(mime);charset&&(mime+="; charset="+charset.toLowerCase())}return mime}function extension(type){if(!type||"string"!=typeof type)return!1;var match=EXTRACT_TYPE_REGEXP.exec(type),exts=match&&self.mime.extensions[match[1].toLowerCase()];return!(!exts||!exts.length)&&exts[0]}function lookup(path){if(!path||"string"!=typeof path)return!1;var extension=extname("x."+path).toLowerCase().substr(1);return extension&&self.mime.types[extension]||!1}function populateMaps(extensions,types){var preference=["nginx","apache",void 0,"iana"];Object.keys(db).forEach(function forEachMimeType(type){var mime=db[type],exts=mime.extensions;if(exts&&exts.length){extensions[type]=exts;for(var i=0;i<exts.length;i++){var extension=exts[i];if(types[extension]){var from=preference.indexOf(db[types[extension]].source),to=preference.indexOf(mime.source);if("application/octet-stream"!==types[extension]&&(from>to||from===to&&"application/"===types[extension].substr(0,12)))continue}types[extension]=type}}})}self.mime.charset=charset,self.mime.charsets={lookup:charset},self.mime.contentType=contentType,self.mime.extension=extension,self.mime.extensions=Object.create(null),self.mime.lookup=lookup,self.mime.types=Object.create(null)}
//# sourceMappingURL=mime-types.js.map
