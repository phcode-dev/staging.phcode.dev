!function(global){const WebSocketTransport={_channelOpen:!1,_clientID:""+Math.round(1e9*Math.random()),_broadcastMessageChannel:null,_debugLog:function(...args){window.LIVE_PREVIEW_DEBIG_ENABLED&&console.log(...args)},_callbacks:null,setCallbacks:function(callbacks){this._callbacks=callbacks},connect:function(){const self=this;self._broadcastMessageChannel=new BroadcastChannel(window.LIVE_PREVIEW_BROADCAST_CHANNEL_ID),self._broadcastMessageChannel.postMessage({type:"BROWSER_CONNECT",url:global.location.href,clientID:self._clientID}),self._broadcastMessageChannel.onmessage=(event=>{self._debugLog("Live Preview: Browser received event from Phoenix: ",JSON.stringify(event.data));const type=event.data.type;switch(type){case"BROWSER_CONNECT":case"BROWSER_MESSAGE":case"BROWSER_CLOSE":break;case"MESSAGE_FROM_PHOENIX":if(self._callbacks&&self._callbacks.message){const clientIDs=event.data.args[0],message=event.data.args[1];(clientIDs.includes(self._clientID)||0===clientIDs.length)&&self._callbacks.message(message)}break;case"PHOENIX_CLOSE":self._channelOpen=!1,self._broadcastMessageChannel.close(),self._callbacks&&self._callbacks.close&&self._callbacks.close();break;default:console.error("Unknown event type for event",event)}}),self._channelOpen=!0,self._callbacks&&self._callbacks.connect&&self._callbacks.connect(),addEventListener("beforeunload",function(){self._channelOpen&&(self._channelOpen=!1,self._broadcastMessageChannel.postMessage({type:"BROWSER_CLOSE",clientID:self._clientID}))})},send:function(msgStr){const self=this;this._broadcastMessageChannel.postMessage({type:"BROWSER_MESSAGE",clientID:this._clientID,message:msgStr})},enable:function(){this.connect()}};global._Brackets_LiveDev_Transport=WebSocketTransport}(this);
//# sourceMappingURL=ServiceWorkerTransportRemote.js.map
