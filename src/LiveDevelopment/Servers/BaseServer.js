define(function(require,exports,module){function BaseServer(config){this._baseUrl=config.baseUrl,this._root=config.root,this._pathResolver=config.pathResolver,this._liveDocuments={}}BaseServer.prototype.getBaseUrl=function(){return this._baseUrl},BaseServer.prototype._setDocInfo=function(liveDocument){var parentUrl,matches,doc=liveDocument.doc;(matches=/^(.*\/)(.+\.([^.]+))$/.exec(doc.file.fullPath))&&(doc.extension=matches[3],parentUrl=this.pathToUrl(matches[1]),doc.url=parentUrl+encodeURI(matches[2]),doc.root={url:doc.url},doc.isDirty&&liveDocument._updateBrowser&&liveDocument._updateBrowser())},BaseServer.prototype.pathToUrl=function(path){var baseUrl=this.getBaseUrl(),relativePath;if(this._pathResolver(path)!==path){var encodedDocPath=encodeURI(path),encodedProjectPath=encodeURI(this._root);return encodedDocPath.replace(encodedProjectPath,baseUrl)}return null},BaseServer.prototype.urlToPath=function(url){var path,baseUrl="";return""!==(baseUrl=this.getBaseUrl())&&0===url.indexOf(baseUrl)?(path=url.replace(baseUrl,encodeURI(this._root)),decodeURI(path)):null},BaseServer.prototype.readyToServe=function(){return $.Deferred().resolve().promise()},BaseServer.prototype.canServe=function(localPath){return!0},BaseServer.prototype._documentKey=function(absolutePath){return"/"+encodeURI(this._pathResolver(absolutePath))},BaseServer.prototype.add=function(liveDocument){if(liveDocument){var key=this._documentKey(liveDocument.doc.file.fullPath);this._setDocInfo(liveDocument),this._liveDocuments[key]=liveDocument}},BaseServer.prototype.remove=function(liveDocument){if(liveDocument){var key=this._liveDocuments[this._documentKey(liveDocument.doc.file.fullPath)];key&&delete this._liveDocuments[key]}},BaseServer.prototype.get=function(path){return this._liveDocuments[this._documentKey(path)]},BaseServer.prototype.clear=function(){this._liveDocuments={}},BaseServer.prototype.start=function(){},BaseServer.prototype.stop=function(){},exports.BaseServer=BaseServer});
//# sourceMappingURL=BaseServer.js.map
