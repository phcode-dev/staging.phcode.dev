define(function HighlightAgent(require,exports,module){var DOMAgent=require("LiveDevelopment/Agents/DOMAgent"),EventDispatcher=require("utils/EventDispatcher"),Inspector=require("LiveDevelopment/Inspector/Inspector"),LiveDevelopment=require("LiveDevelopment/LiveDevelopment"),RemoteAgent=require("LiveDevelopment/Agents/RemoteAgent"),_=require("thirdparty/lodash"),_highlight={};function _onRemoteHighlight(event,res){var node;"1"===res.value&&(node=DOMAgent.nodeWithId(res.nodeId)),exports.trigger("highlight",node)}function hide(){switch(_highlight.type){case"node":Inspector.DOM.hideHighlight();break;case"css":RemoteAgent.call("hideHighlight")}_highlight={}}function node(n){if(LiveDevelopment.config.experimental&&Inspector.config.highlight){if(n&&3===n.type&&(n=n.parent),!n||!n.nodeId||1!==n.type)return hide();"node"===_highlight.type&&_highlight.ref===n.nodeId||(_highlight={type:"node",ref:n.nodeId},Inspector.DOM.highlightNode(n.nodeId,Inspector.config.highlightConfig))}}function rule(name){_highlight.ref!==name&&(hide(),_highlight={type:"css",ref:name},RemoteAgent.call("highlightRule",name))}function domElement(ids){var selector="";Array.isArray(ids)||(ids=[ids]),_.each(ids,function(id){""!==selector&&(selector+=","),selector+="[data-brackets-id='"+id+"']"}),rule(selector)}function redraw(){RemoteAgent.call("redrawHighlights")}function load(){LiveDevelopment.config.experimental&&RemoteAgent.on("highlight.HighlightAgent",_onRemoteHighlight)}function unload(){LiveDevelopment.config.experimental&&RemoteAgent.off(".HighlightAgent")}EventDispatcher.makeEventDispatcher(exports),exports.hide=hide,exports.node=node,exports.rule=rule,exports.domElement=domElement,exports.redraw=redraw,exports.load=load,exports.unload=unload});
//# sourceMappingURL=HighlightAgent.js.map
