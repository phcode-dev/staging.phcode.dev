define(function(require,exports,module){var CodeMirror=brackets.getModule("thirdparty/CodeMirror/lib/codemirror"),cols=CodeMirror.countColumn,pos=CodeMirror.Pos;function lastNonEmptyLineNumber(cm){for(var lc=cm.lastLine(),line=cm.getLine(lc);lc>0&&0===line.trim().length;)lc--,line=cm.getLine(lc);return lc}function indentFold(cm,start){var lineText=cm.getLine(start.line),tabSize=cm.getOption("tabSize"),lineIndent=cols(lineText,null,tabSize),collapsible=!1,lineCount=cm.lineCount(),token=cm.getTokenAt(pos(start.line,lineIndent+1));if(!(0===lineText.trim().length||token&&"comment"===token.type)){var i,indent,currentLine;for(i=start.line+1;i<lineCount;i++)if(currentLine=cm.getLine(i),indent=cols(currentLine,null,tabSize),token=cm.getTokenAt(pos(i,indent+1)),0!==currentLine.trim().length&&token&&"comment"!==token.type){if(collapsible){if(indent<=lineIndent)return{from:pos(start.line,lineText.length),to:pos(i-1,cm.getLine(i-1).length)}}else indent>lineIndent&&(collapsible=!0);if(indent===lineIndent||indent<lineIndent)return}return collapsible?(i=lastNonEmptyLineNumber(cm),{from:pos(start.line,lineText.length),to:pos(i,cm.getLine(i).length)}):void 0}}module.exports=indentFold});
//# sourceMappingURL=indentFold.js.map
