define(function(require,exports,module){var AppInit=require("utils/AppInit"),Editor=require("editor/Editor").Editor,Commands=require("command/Commands"),CommandManager=require("command/CommandManager"),PreferencesManager=require("preferences/PreferencesManager"),Strings=require("strings"),_=require("thirdparty/lodash"),SHOW_LINE_NUMBERS="showLineNumbers",STYLE_ACTIVE_LINE="styleActiveLine",WORD_WRAP="wordWrap",CLOSE_BRACKETS="closeBrackets",AUTO_HIDE_SEARCH="autoHideSearch",_optionMapping={};function _updateCheckedState(name){var mapping=_optionMapping[name];mapping&&CommandManager.get(mapping).setChecked(PreferencesManager.get(name))}function _getToggler(prefName){return function(){PreferencesManager.set(prefName,!PreferencesManager.get(prefName))}}function _init(){_.each(_optionMapping,function(commandName,prefName){CommandManager.get(commandName).setChecked(PreferencesManager.get(prefName))}),Editor.getShowLineNumbers()||Editor._toggleLinePadding(!0)}_optionMapping.showLineNumbers=Commands.TOGGLE_LINE_NUMBERS,_optionMapping.styleActiveLine=Commands.TOGGLE_ACTIVE_LINE,_optionMapping.wordWrap=Commands.TOGGLE_WORD_WRAP,_optionMapping.closeBrackets=Commands.TOGGLE_CLOSE_BRACKETS,_optionMapping.autoHideSearch=Commands.TOGGLE_SEARCH_AUTOHIDE,Object.keys(_optionMapping).forEach(function(preference){PreferencesManager.on("change",preference,function(){_updateCheckedState(preference)})}),CommandManager.register(Strings.CMD_TOGGLE_LINE_NUMBERS,Commands.TOGGLE_LINE_NUMBERS,_getToggler("showLineNumbers")),CommandManager.register(Strings.CMD_TOGGLE_ACTIVE_LINE,Commands.TOGGLE_ACTIVE_LINE,_getToggler("styleActiveLine")),CommandManager.register(Strings.CMD_TOGGLE_WORD_WRAP,Commands.TOGGLE_WORD_WRAP,_getToggler(WORD_WRAP)),CommandManager.register(Strings.CMD_TOGGLE_CLOSE_BRACKETS,Commands.TOGGLE_CLOSE_BRACKETS,_getToggler(CLOSE_BRACKETS)),CommandManager.register(Strings.CMD_TOGGLE_SEARCH_AUTOHIDE,Commands.TOGGLE_SEARCH_AUTOHIDE,_getToggler("autoHideSearch")),AppInit.htmlReady(_init)});
//# sourceMappingURL=EditorOptionHandlers.js.map
