!function(){const isLocalHost="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,urlParams=new URLSearchParams(window.location.search||""),isBugsnagEnabled=!window.testEnvironment&&!isLocalHost;class CustomBugSnagError extends Error{constructor(message,err){super(message+(err.message||"")),this.name=err.constructor&&err.constructor.name||this.constructor.name,this.stack=message+" : "+err.stack}}const logger={error:console.error,warn:console.warn,reportError:function(error,message){isBugsnagEnabled&&Bugsnag.notify(message?new CustomBugSnagError(message,error):error)},leaveTrail:function(message){console.log("[Trail] : ",message),isBugsnagEnabled&&Bugsnag.leaveBreadcrumb(message)},loggingOptions:{LOCAL_STORAGE_KEYS:{LOG_LIVE_PREVIEW:"logLivePreview"},healthDataDisabled:!1,logLivePreview:!1},livePreview:{log:function(...args){logger.loggingOptions.logLivePreview&&logger.log(...args)}}};function swallowLogs(){}window.logger=logger;const savedLoggingFn=console.log,savedInfoFn=console.info;function onError(event){let reportedStatus=logger.loggingOptions.healthDataDisabled?"Not Reported as health data disabled.":"Reported";if(console.error(`Caught Critical error, ${reportedStatus}: `,event),window.Metrics&&window.Metrics.countEvent(window.Metrics.EVENT_TYPE.ERROR,"uncaught","logger"),logger.loggingOptions.healthDataDisabled)return!1}window.setupLogging=function(){const logToConsoleOverride=urlParams.get("logToConsole"),logToConsolePref=localStorage.getItem("logToConsole");return logToConsoleOverride&&"true"===logToConsoleOverride.toLowerCase()||logToConsolePref&&"true"===logToConsolePref.toLowerCase()&&!logToConsoleOverride?(console.log=savedLoggingFn,console.info=savedInfoFn,logger.log=console.log,logger.info=console.info,logger.logToConsolePref="true",window.debugMode=!0,!0):(console.info=console.log=swallowLogs,logger.info=logger.log=swallowLogs,logger.logToConsolePref="false",window.debugMode=!1,!1)},window.setupLogging(),window.isLoggingEnabled=function(key){let loggingEnabled;return"true"===(localStorage.getItem(key)||"false").toLowerCase()},window.toggleLoggingKey=function(key){window.isLoggingEnabled(key)?localStorage.setItem(key,"false"):localStorage.setItem(key,"true")},logger.loggingOptions.logLivePreview=window.isLoggingEnabled(logger.loggingOptions.LOCAL_STORAGE_KEYS.LOG_LIVE_PREVIEW),isBugsnagEnabled?(Bugsnag.start({apiKey:"a899c29d251bfdf30c3222016a2a7ea7",appType:window.__TAURI__?"tauri":"browser",collectUserIp:!1,appVersion:AppConfig.version,enabledReleaseStages:["development","production","staging","tauri-development","tauri-production","tauri-staging"],releaseStage:window.__TAURI__?"tauri-"+AppConfig.config.bugsnagEnv:AppConfig.config.bugsnagEnv,enabledBreadcrumbTypes:["manual"],maxEvents:10,maxBreadcrumbs:50,onError:onError}),window.cacheClearError&&logger.reportError(window.cacheClearError)):console.warn("Logging to Bugsnag is disabled as current environment is localhost.")}();
//# sourceMappingURL=loggerSetup.js.map
