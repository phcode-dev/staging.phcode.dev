!function(factory){if("object"==typeof exports&&"object"==typeof module)module.exports=factory();else if("function"==typeof define&&define.amd)define(factory);else{var root;("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this||{}).doc=factory()}}(function(){"use strict";var __getOwnPropNames=Object.getOwnPropertyNames,__commonJS,require_doc_js_umd;return((cb,mod)=>(function __require(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports}))({"dist/_doc.js.umd.js"(exports,module){var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames2=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__esm=(fn,res)=>(function __init(){return fn&&(res=(0,fn[__getOwnPropNames2(fn)[0]])(fn=0)),res}),__commonJS2=(cb,mod)=>(function __require(){return mod||(0,cb[__getOwnPropNames2(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports}),__export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&"object"==typeof from||"function"==typeof from)for(let key of __getOwnPropNames2(from))__hasOwnProp.call(to,key)||key===except||__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to},__toESM=(mod,isNodeMode,target)=>(target=null!=mod?__create(__getProtoOf(mod)):{},__copyProps(!isNodeMode&&mod&&mod.__esModule?target:__defProp(target,"default",{value:mod,enumerable:!0}),mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod),init_define_process=__esm({"<define:process>"(){}}),require_doc_builders=__commonJS2({"src/document/doc-builders.js"(exports2,module2){function concat(parts){return{type:"concat",parts:parts}}function indent(contents){return{type:"indent",contents:contents}}function align(widthOrString,contents){return{type:"align",contents:contents,n:widthOrString}}function group(contents){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"group",id:opts.id,contents:contents,break:Boolean(opts.shouldBreak),expandedStates:opts.expandedStates}}function dedentToRoot(contents){return align(Number.NEGATIVE_INFINITY,contents)}function markAsRoot(contents){return align({type:"root"},contents)}function dedent(contents){return align(-1,contents)}function conditionalGroup(states,opts){return group(states[0],Object.assign(Object.assign({},opts),{},{expandedStates:states}))}function fill(parts){return{type:"fill",parts:parts}}function ifBreak(breakContents,flatContents){let opts;return{type:"if-break",breakContents:breakContents,flatContents:flatContents,groupId:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).groupId}}function indentIfBreak(contents,opts){return{type:"indent-if-break",contents:contents,groupId:opts.groupId,negate:opts.negate}}function lineSuffix(contents){return{type:"line-suffix",contents:contents}}init_define_process();var lineSuffixBoundary={type:"line-suffix-boundary"},breakParent={type:"break-parent"},trim={type:"trim"},hardlineWithoutBreakParent={type:"line",hard:!0},literallineWithoutBreakParent={type:"line",hard:!0,literal:!0},line={type:"line"},softline={type:"line",soft:!0},hardline=concat([hardlineWithoutBreakParent,breakParent]),literalline=concat([literallineWithoutBreakParent,breakParent]),cursor={type:"cursor",placeholder:Symbol("cursor")};function join(sep,arr){const res=[];for(let i=0;i<arr.length;i++)0!==i&&res.push(sep),res.push(arr[i]);return concat(res)}function addAlignmentToDoc(doc,size,tabWidth){let aligned=doc;if(size>0){for(let i=0;i<Math.floor(size/tabWidth);++i)aligned=indent(aligned);aligned=align(size%tabWidth,aligned),aligned=align(Number.NEGATIVE_INFINITY,aligned)}return aligned}function label(label2,contents){return{type:"label",label:label2,contents:contents}}module2.exports={concat:concat,join:join,line:line,softline:softline,hardline:hardline,literalline:literalline,group:group,conditionalGroup:conditionalGroup,fill:fill,lineSuffix:lineSuffix,lineSuffixBoundary:lineSuffixBoundary,cursor:cursor,breakParent:breakParent,ifBreak:ifBreak,trim:trim,indent:indent,indentIfBreak:indentIfBreak,align:align,addAlignmentToDoc:addAlignmentToDoc,markAsRoot:markAsRoot,dedentToRoot:dedentToRoot,dedent:dedent,hardlineWithoutBreakParent:hardlineWithoutBreakParent,literallineWithoutBreakParent:literallineWithoutBreakParent,label:label}}}),require_end_of_line=__commonJS2({"src/common/end-of-line.js"(exports2,module2){function guessEndOfLine(text){const index=text.indexOf("\r");return index>=0?"\n"===text.charAt(index+1)?"crlf":"cr":"lf"}function convertEndOfLineToChars(value){switch(value){case"cr":return"\r";case"crlf":return"\r\n";default:return"\n"}}function countEndOfLineChars(text,eol){let regex;switch(eol){case"\n":regex=/\n/g;break;case"\r":regex=/\r/g;break;case"\r\n":regex=/\r\n/g;break;default:throw new Error('Unexpected "eol" '.concat(JSON.stringify(eol),"."))}const endOfLines=text.match(regex);return endOfLines?endOfLines.length:0}function normalizeEndOfLine(text){return text.replace(/\r\n?/g,"\n")}init_define_process(),module2.exports={guessEndOfLine:guessEndOfLine,convertEndOfLineToChars:convertEndOfLineToChars,countEndOfLineChars:countEndOfLineChars,normalizeEndOfLine:normalizeEndOfLine}}}),require_get_last=__commonJS2({"src/utils/get-last.js"(exports2,module2){init_define_process();var getLast=arr=>arr[arr.length-1];module2.exports=getLast}});function ansiRegex(){let{onlyFirst:onlyFirst=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const pattern=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(pattern,onlyFirst?void 0:"g")}var init_ansi_regex=__esm({"node_modules/strip-ansi/node_modules/ansi-regex/index.js"(){init_define_process()}});function stripAnsi(string){if("string"!=typeof string)throw new TypeError("Expected a `string`, got `".concat(typeof string,"`"));return string.replace(ansiRegex(),"")}var init_strip_ansi=__esm({"node_modules/strip-ansi/index.js"(){init_define_process(),init_ansi_regex()}});function isFullwidthCodePoint(codePoint){return!!Number.isInteger(codePoint)&&(codePoint>=4352&&(codePoint<=4447||9001===codePoint||9002===codePoint||11904<=codePoint&&codePoint<=12871&&12351!==codePoint||12880<=codePoint&&codePoint<=19903||19968<=codePoint&&codePoint<=42182||43360<=codePoint&&codePoint<=43388||44032<=codePoint&&codePoint<=55203||63744<=codePoint&&codePoint<=64255||65040<=codePoint&&codePoint<=65049||65072<=codePoint&&codePoint<=65131||65281<=codePoint&&codePoint<=65376||65504<=codePoint&&codePoint<=65510||110592<=codePoint&&codePoint<=110593||127488<=codePoint&&codePoint<=127569||131072<=codePoint&&codePoint<=262141))}var init_is_fullwidth_code_point=__esm({"node_modules/is-fullwidth-code-point/index.js"(){init_define_process()}}),require_emoji_regex=__commonJS2({"node_modules/emoji-regex/index.js"(exports2,module2){init_define_process(),module2.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}}}),string_width_exports={},import_emoji_regex;function stringWidth(string){if("string"!=typeof string||0===string.length)return 0;if(0===(string=stripAnsi(string)).length)return 0;string=string.replace((0,import_emoji_regex.default)(),"  ");let width=0;for(let index=0;index<string.length;index++){const codePoint=string.codePointAt(index);codePoint<=31||codePoint>=127&&codePoint<=159||(codePoint>=768&&codePoint<=879||(codePoint>65535&&index++,width+=isFullwidthCodePoint(codePoint)?2:1))}return width}__export(string_width_exports,{default:()=>stringWidth});var init_string_width=__esm({"node_modules/string-width/index.js"(){init_define_process(),init_strip_ansi(),init_is_fullwidth_code_point(),import_emoji_regex=__toESM(require_emoji_regex())}}),require_get_string_width=__commonJS2({"src/utils/get-string-width.js"(exports2,module2){init_define_process();var stringWidth2=(init_string_width(),__toCommonJS(string_width_exports)).default,notAsciiRegex=/[^\x20-\x7F]/;function getStringWidth(text){return text?notAsciiRegex.test(text)?stringWidth2(text):text.length:0}module2.exports=getStringWidth}}),require_doc_utils=__commonJS2({"src/document/doc-utils.js"(exports2,module2){init_define_process();var getLast=require_get_last(),{literalline:literalline,join:join}=require_doc_builders(),isConcat=doc=>Array.isArray(doc)||doc&&"concat"===doc.type,getDocParts=doc=>{if(Array.isArray(doc))return doc;if("concat"!==doc.type&&"fill"!==doc.type)throw new Error("Expect doc type to be `concat` or `fill`.");return doc.parts},traverseDocOnExitStackMarker={};function traverseDoc(doc,onEnter,onExit,shouldTraverseConditionalGroups){const docsStack=[doc];for(;docsStack.length>0;){const doc2=docsStack.pop();if(doc2!==traverseDocOnExitStackMarker){if(onExit&&docsStack.push(doc2,traverseDocOnExitStackMarker),!onEnter||!1!==onEnter(doc2))if(isConcat(doc2)||"fill"===doc2.type){const parts=getDocParts(doc2);for(let ic,i=parts.length-1;i>=0;--i)docsStack.push(parts[i])}else if("if-break"===doc2.type)doc2.flatContents&&docsStack.push(doc2.flatContents),doc2.breakContents&&docsStack.push(doc2.breakContents);else if("group"===doc2.type&&doc2.expandedStates)if(shouldTraverseConditionalGroups)for(let ic,i=doc2.expandedStates.length-1;i>=0;--i)docsStack.push(doc2.expandedStates[i]);else docsStack.push(doc2.contents);else doc2.contents&&docsStack.push(doc2.contents)}else onExit(docsStack.pop())}}function mapDoc(doc,cb){const mapped=new Map;return rec(doc);function rec(doc2){if(mapped.has(doc2))return mapped.get(doc2);const result=process2(doc2);return mapped.set(doc2,result),result}function process2(doc2){if(Array.isArray(doc2))return cb(doc2.map(rec));if("concat"===doc2.type||"fill"===doc2.type){const parts=doc2.parts.map(rec);return cb(Object.assign(Object.assign({},doc2),{},{parts:parts}))}if("if-break"===doc2.type){const breakContents=doc2.breakContents&&rec(doc2.breakContents),flatContents=doc2.flatContents&&rec(doc2.flatContents);return cb(Object.assign(Object.assign({},doc2),{},{breakContents:breakContents,flatContents:flatContents}))}if("group"===doc2.type&&doc2.expandedStates){const expandedStates=doc2.expandedStates.map(rec),contents=expandedStates[0];return cb(Object.assign(Object.assign({},doc2),{},{contents:contents,expandedStates:expandedStates}))}if(doc2.contents){const contents=rec(doc2.contents);return cb(Object.assign(Object.assign({},doc2),{},{contents:contents}))}return cb(doc2)}}function findInDoc(doc,fn,defaultValue){let result=defaultValue,hasStopped=!1;function findInDocOnEnterFn(doc2){const maybeResult=fn(doc2);if(void 0!==maybeResult&&(hasStopped=!0,result=maybeResult),hasStopped)return!1}return traverseDoc(doc,findInDocOnEnterFn),result}function willBreakFn(doc){return!("group"!==doc.type||!doc.break)||(!("line"!==doc.type||!doc.hard)||("break-parent"===doc.type||void 0))}function willBreak(doc){return findInDoc(doc,willBreakFn,!1)}function breakParentGroup(groupStack){if(groupStack.length>0){const parentGroup=getLast(groupStack);parentGroup.expandedStates||parentGroup.break||(parentGroup.break="propagated")}return null}function propagateBreaks(doc){const alreadyVisitedSet=new Set,groupStack=[];function propagateBreaksOnEnterFn(doc2){if("break-parent"===doc2.type&&breakParentGroup(groupStack),"group"===doc2.type){if(groupStack.push(doc2),alreadyVisitedSet.has(doc2))return!1;alreadyVisitedSet.add(doc2)}}function propagateBreaksOnExitFn(doc2){if("group"===doc2.type){const group=groupStack.pop();group.break&&breakParentGroup(groupStack)}}traverseDoc(doc,propagateBreaksOnEnterFn,propagateBreaksOnExitFn,!0)}function removeLinesFn(doc){return"line"!==doc.type||doc.hard?"if-break"===doc.type?doc.flatContents||"":doc:doc.soft?"":" "}function removeLines(doc){return mapDoc(doc,removeLinesFn)}var isHardline=(doc,nextDoc)=>doc&&"line"===doc.type&&doc.hard&&nextDoc&&"break-parent"===nextDoc.type;function stripDocTrailingHardlineFromDoc(doc){if(!doc)return doc;if(isConcat(doc)||"fill"===doc.type){const parts=getDocParts(doc);for(;parts.length>1&&isHardline(...parts.slice(-2));)parts.length-=2;if(parts.length>0){const lastPart=stripDocTrailingHardlineFromDoc(getLast(parts));parts[parts.length-1]=lastPart}return Array.isArray(doc)?parts:Object.assign(Object.assign({},doc),{},{parts:parts})}switch(doc.type){case"align":case"indent":case"indent-if-break":case"group":case"line-suffix":case"label":{const contents=stripDocTrailingHardlineFromDoc(doc.contents);return Object.assign(Object.assign({},doc),{},{contents:contents})}case"if-break":{const breakContents=stripDocTrailingHardlineFromDoc(doc.breakContents),flatContents=stripDocTrailingHardlineFromDoc(doc.flatContents);return Object.assign(Object.assign({},doc),{},{breakContents:breakContents,flatContents:flatContents})}}return doc}function stripTrailingHardline(doc){return stripDocTrailingHardlineFromDoc(cleanDoc(doc))}function cleanDocFn(doc){switch(doc.type){case"fill":if(doc.parts.every(part=>""===part))return"";break;case"group":if(!(doc.contents||doc.id||doc.break||doc.expandedStates))return"";if("group"===doc.contents.type&&doc.contents.id===doc.id&&doc.contents.break===doc.break&&doc.contents.expandedStates===doc.expandedStates)return doc.contents;break;case"align":case"indent":case"indent-if-break":case"line-suffix":if(!doc.contents)return"";break;case"if-break":if(!doc.flatContents&&!doc.breakContents)return""}if(!isConcat(doc))return doc;const parts=[];for(const part of getDocParts(doc)){if(!part)continue;const[currentPart,...restParts]=isConcat(part)?getDocParts(part):[part];"string"==typeof currentPart&&"string"==typeof getLast(parts)?parts[parts.length-1]+=currentPart:parts.push(currentPart),parts.push(...restParts)}return 0===parts.length?"":1===parts.length?parts[0]:Array.isArray(doc)?parts:Object.assign(Object.assign({},doc),{},{parts:parts})}function cleanDoc(doc){return mapDoc(doc,currentDoc=>cleanDocFn(currentDoc))}function normalizeParts(parts){const newParts=[],restParts=parts.filter(Boolean);for(;restParts.length>0;){const part=restParts.shift();part&&(isConcat(part)?restParts.unshift(...getDocParts(part)):newParts.length>0&&"string"==typeof getLast(newParts)&&"string"==typeof part?newParts[newParts.length-1]+=part:newParts.push(part))}return newParts}function normalizeDoc(doc){return mapDoc(doc,currentDoc=>Array.isArray(currentDoc)?normalizeParts(currentDoc):currentDoc.parts?Object.assign(Object.assign({},currentDoc),{},{parts:normalizeParts(currentDoc.parts)}):currentDoc)}function replaceEndOfLine(doc){return mapDoc(doc,currentDoc=>"string"==typeof currentDoc&&currentDoc.includes("\n")?replaceTextEndOfLine(currentDoc):currentDoc)}function replaceTextEndOfLine(text){let replacement=arguments.length>1&&void 0!==arguments[1]?arguments[1]:literalline;return join(replacement,text.split("\n")).parts}function canBreakFn(doc){if("line"===doc.type)return!0}function canBreak(doc){return findInDoc(doc,canBreakFn,!1)}module2.exports={isConcat:isConcat,getDocParts:getDocParts,willBreak:willBreak,traverseDoc:traverseDoc,findInDoc:findInDoc,mapDoc:mapDoc,propagateBreaks:propagateBreaks,removeLines:removeLines,stripTrailingHardline:stripTrailingHardline,normalizeParts:normalizeParts,normalizeDoc:normalizeDoc,cleanDoc:cleanDoc,replaceTextEndOfLine:replaceTextEndOfLine,replaceEndOfLine:replaceEndOfLine,canBreak:canBreak}}}),require_doc_printer=__commonJS2({"src/document/doc-printer.js"(exports2,module2){init_define_process();var{convertEndOfLineToChars:convertEndOfLineToChars}=require_end_of_line(),getLast=require_get_last(),getStringWidth=require_get_string_width(),{fill:fill,cursor:cursor,indent:indent}=require_doc_builders(),{isConcat:isConcat,getDocParts:getDocParts}=require_doc_utils(),groupModeMap,MODE_BREAK=1,MODE_FLAT=2;function rootIndent(){return{value:"",length:0,queue:[]}}function makeIndent(ind,options){return generateInd(ind,{type:"indent"},options)}function makeAlign(indent2,widthOrDoc,options){if(widthOrDoc===Number.NEGATIVE_INFINITY)return indent2.root||{value:"",length:0,queue:[]};if(widthOrDoc<0)return generateInd(indent2,{type:"dedent"},options);if(!widthOrDoc)return indent2;if("root"===widthOrDoc.type)return Object.assign(Object.assign({},indent2),{},{root:indent2});const alignType="string"==typeof widthOrDoc?"stringAlign":"numberAlign";return generateInd(indent2,{type:alignType,n:widthOrDoc},options)}function generateInd(ind,newPart,options){const queue="dedent"===newPart.type?ind.queue.slice(0,-1):[...ind.queue,newPart];let value="",length=0,lastTabs=0,lastSpaces=0;for(const part of queue)switch(part.type){case"indent":flush(),options.useTabs?addTabs(1):addSpaces(options.tabWidth);break;case"stringAlign":flush(),value+=part.n,length+=part.n.length;break;case"numberAlign":lastTabs+=1,lastSpaces+=part.n;break;default:throw new Error("Unexpected type '".concat(part.type,"'"))}return flushSpaces(),Object.assign(Object.assign({},ind),{},{value:value,length:length,queue:queue});function addTabs(count){value+="\t".repeat(count),length+=options.tabWidth*count}function addSpaces(count){value+=" ".repeat(count),length+=count}function flush(){options.useTabs?flushTabs():flushSpaces()}function flushTabs(){lastTabs>0&&addTabs(lastTabs),resetLast()}function flushSpaces(){lastSpaces>0&&addSpaces(lastSpaces),resetLast()}function resetLast(){lastTabs=0,lastSpaces=0}}function trim(out){if(0===out.length)return 0;let trimCount=0;for(;out.length>0&&"string"==typeof getLast(out)&&/^[\t ]*$/.test(getLast(out));)trimCount+=out.pop().length;if(out.length>0&&"string"==typeof getLast(out)){const trimmed=getLast(out).replace(/[\t ]*$/,"");trimCount+=getLast(out).length-trimmed.length,out[out.length-1]=trimmed}return trimCount}function fits(next,restCommands,width,options,hasLineSuffix,mustBeFlat){let restIdx=restCommands.length;const cmds=[next],out=[];for(;width>=0;){if(0===cmds.length){if(0===restIdx)return!0;cmds.push(restCommands[restIdx-1]),restIdx--;continue}const[ind,mode,doc]=cmds.pop();if("string"==typeof doc)out.push(doc),width-=getStringWidth(doc);else if(isConcat(doc)){const parts=getDocParts(doc);for(let i=parts.length-1;i>=0;i--)cmds.push([ind,mode,parts[i]])}else switch(doc.type){case"indent":cmds.push([makeIndent(ind,options),mode,doc.contents]);break;case"align":cmds.push([makeAlign(ind,doc.n,options),mode,doc.contents]);break;case"trim":width+=trim(out);break;case"group":{if(mustBeFlat&&doc.break)return!1;const groupMode=doc.break?MODE_BREAK:mode;cmds.push([ind,groupMode,doc.expandedStates&&groupMode===MODE_BREAK?getLast(doc.expandedStates):doc.contents]),doc.id&&(groupModeMap[doc.id]=groupMode);break}case"fill":for(let i=doc.parts.length-1;i>=0;i--)cmds.push([ind,mode,doc.parts[i]]);break;case"if-break":case"indent-if-break":{const groupMode=doc.groupId?groupModeMap[doc.groupId]:mode;if(groupMode===MODE_BREAK){const breakContents="if-break"===doc.type?doc.breakContents:doc.negate?doc.contents:indent(doc.contents);breakContents&&cmds.push([ind,mode,breakContents])}if(groupMode===MODE_FLAT){const flatContents="if-break"===doc.type?doc.flatContents:doc.negate?indent(doc.contents):doc.contents;flatContents&&cmds.push([ind,mode,flatContents])}break}case"line":switch(mode){case MODE_FLAT:if(!doc.hard){doc.soft||(out.push(" "),width-=1);break}return!0;case MODE_BREAK:return!0}break;case"line-suffix":hasLineSuffix=!0;break;case"line-suffix-boundary":if(hasLineSuffix)return!1;break;case"label":cmds.push([ind,mode,doc.contents])}}return!1}function printDocToString(doc,options){groupModeMap={};const width=options.printWidth,newLine=convertEndOfLineToChars(options.endOfLine);let pos=0;const cmds=[[{value:"",length:0,queue:[]},MODE_BREAK,doc]],out=[];let shouldRemeasure=!1,lineSuffix=[];for(;cmds.length>0;){const[ind,mode,doc2]=cmds.pop();if("string"==typeof doc2){const formatted="\n"!==newLine?doc2.replace(/\n/g,newLine):doc2;out.push(formatted),pos+=getStringWidth(formatted)}else if(isConcat(doc2)){const parts=getDocParts(doc2);for(let i=parts.length-1;i>=0;i--)cmds.push([ind,mode,parts[i]])}else switch(doc2.type){case"cursor":out.push(cursor.placeholder);break;case"indent":cmds.push([makeIndent(ind,options),mode,doc2.contents]);break;case"align":cmds.push([makeAlign(ind,doc2.n,options),mode,doc2.contents]);break;case"trim":pos-=trim(out);break;case"group":switch(mode){case MODE_FLAT:if(!shouldRemeasure){cmds.push([ind,doc2.break?MODE_BREAK:MODE_FLAT,doc2.contents]);break}case MODE_BREAK:{shouldRemeasure=!1;const next=[ind,MODE_FLAT,doc2.contents],rem=width-pos,hasLineSuffix=lineSuffix.length>0;if(!doc2.break&&fits(next,cmds,rem,options,hasLineSuffix))cmds.push(next);else if(doc2.expandedStates){const mostExpanded=getLast(doc2.expandedStates);if(doc2.break){cmds.push([ind,MODE_BREAK,mostExpanded]);break}for(let i=1;i<doc2.expandedStates.length+1;i++){if(i>=doc2.expandedStates.length){cmds.push([ind,MODE_BREAK,mostExpanded]);break}{const state=doc2.expandedStates[i],cmd=[ind,MODE_FLAT,state];if(fits(cmd,cmds,rem,options,hasLineSuffix)){cmds.push(cmd);break}}}}else cmds.push([ind,MODE_BREAK,doc2.contents]);break}}doc2.id&&(groupModeMap[doc2.id]=getLast(cmds)[1]);break;case"fill":{const rem=width-pos,{parts:parts}=doc2;if(0===parts.length)break;const[content,whitespace]=parts,contentFlatCmd=[ind,MODE_FLAT,content],contentBreakCmd=[ind,MODE_BREAK,content],contentFits=fits(contentFlatCmd,[],rem,options,lineSuffix.length>0,!0);if(1===parts.length){contentFits?cmds.push(contentFlatCmd):cmds.push(contentBreakCmd);break}const whitespaceFlatCmd=[ind,MODE_FLAT,whitespace],whitespaceBreakCmd=[ind,MODE_BREAK,whitespace];if(2===parts.length){contentFits?cmds.push(whitespaceFlatCmd,contentFlatCmd):cmds.push(whitespaceBreakCmd,contentBreakCmd);break}parts.splice(0,2);const remainingCmd=[ind,mode,fill(parts)],secondContent=parts[0],firstAndSecondContentFlatCmd=[ind,MODE_FLAT,[content,whitespace,secondContent]],firstAndSecondContentFits=fits(firstAndSecondContentFlatCmd,[],rem,options,lineSuffix.length>0,!0);firstAndSecondContentFits?cmds.push(remainingCmd,whitespaceFlatCmd,contentFlatCmd):contentFits?cmds.push(remainingCmd,whitespaceBreakCmd,contentFlatCmd):cmds.push(remainingCmd,whitespaceBreakCmd,contentBreakCmd);break}case"if-break":case"indent-if-break":{const groupMode=doc2.groupId?groupModeMap[doc2.groupId]:mode;if(groupMode===MODE_BREAK){const breakContents="if-break"===doc2.type?doc2.breakContents:doc2.negate?doc2.contents:indent(doc2.contents);breakContents&&cmds.push([ind,mode,breakContents])}if(groupMode===MODE_FLAT){const flatContents="if-break"===doc2.type?doc2.flatContents:doc2.negate?indent(doc2.contents):doc2.contents;flatContents&&cmds.push([ind,mode,flatContents])}break}case"line-suffix":lineSuffix.push([ind,mode,doc2.contents]);break;case"line-suffix-boundary":lineSuffix.length>0&&cmds.push([ind,mode,{type:"line",hard:!0}]);break;case"line":switch(mode){case MODE_FLAT:if(!doc2.hard){doc2.soft||(out.push(" "),pos+=1);break}shouldRemeasure=!0;case MODE_BREAK:if(lineSuffix.length>0){cmds.push([ind,mode,doc2],...lineSuffix.reverse()),lineSuffix=[];break}doc2.literal?ind.root?(out.push(newLine,ind.root.value),pos=ind.root.length):(out.push(newLine),pos=0):(pos-=trim(out),out.push(newLine+ind.value),pos=ind.length)}break;case"label":cmds.push([ind,mode,doc2.contents])}0===cmds.length&&lineSuffix.length>0&&(cmds.push(...lineSuffix.reverse()),lineSuffix=[])}const cursorPlaceholderIndex=out.indexOf(cursor.placeholder);if(-1!==cursorPlaceholderIndex){const otherCursorPlaceholderIndex=out.indexOf(cursor.placeholder,cursorPlaceholderIndex+1),beforeCursor=out.slice(0,cursorPlaceholderIndex).join(""),aroundCursor=out.slice(cursorPlaceholderIndex+1,otherCursorPlaceholderIndex).join(""),afterCursor=out.slice(otherCursorPlaceholderIndex+1).join("");return{formatted:beforeCursor+aroundCursor+afterCursor,cursorNodeStart:beforeCursor.length,cursorNodeText:aroundCursor}}return{formatted:out.join("")}}module2.exports={printDocToString:printDocToString}}}),require_doc_debug=__commonJS2({"src/document/doc-debug.js"(exports2,module2){init_define_process();var{isConcat:isConcat,getDocParts:getDocParts}=require_doc_utils();function flattenDoc(doc){if(!doc)return"";if(isConcat(doc)){const res=[];for(const part of getDocParts(doc))if(isConcat(part))res.push(...flattenDoc(part).parts);else{const flattened=flattenDoc(part);""!==flattened&&res.push(flattened)}return{type:"concat",parts:res}}return"if-break"===doc.type?Object.assign(Object.assign({},doc),{},{breakContents:flattenDoc(doc.breakContents),flatContents:flattenDoc(doc.flatContents)}):"group"===doc.type?Object.assign(Object.assign({},doc),{},{contents:flattenDoc(doc.contents),expandedStates:doc.expandedStates&&doc.expandedStates.map(flattenDoc)}):"fill"===doc.type?{type:"fill",parts:doc.parts.map(flattenDoc)}:doc.contents?Object.assign(Object.assign({},doc),{},{contents:flattenDoc(doc.contents)}):doc}function printDocToDebug(doc){const printedSymbols=Object.create(null),usedKeysForSymbols=new Set;return printDoc(flattenDoc(doc));function printDoc(doc2,index,parentParts){if("string"==typeof doc2)return JSON.stringify(doc2);if(isConcat(doc2)){const printed=getDocParts(doc2).map(printDoc).filter(Boolean);return 1===printed.length?printed[0]:"[".concat(printed.join(", "),"]")}if("line"===doc2.type){const withBreakParent=Array.isArray(parentParts)&&parentParts[index+1]&&"break-parent"===parentParts[index+1].type;return doc2.literal?withBreakParent?"literalline":"literallineWithoutBreakParent":doc2.hard?withBreakParent?"hardline":"hardlineWithoutBreakParent":doc2.soft?"softline":"line"}if("break-parent"===doc2.type){const afterHardline=Array.isArray(parentParts)&&parentParts[index-1]&&"line"===parentParts[index-1].type&&parentParts[index-1].hard;return afterHardline?void 0:"breakParent"}if("trim"===doc2.type)return"trim";if("indent"===doc2.type)return"indent("+printDoc(doc2.contents)+")";if("align"===doc2.type)return doc2.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+printDoc(doc2.contents)+")":doc2.n<0?"dedent("+printDoc(doc2.contents)+")":"root"===doc2.n.type?"markAsRoot("+printDoc(doc2.contents)+")":"align("+JSON.stringify(doc2.n)+", "+printDoc(doc2.contents)+")";if("if-break"===doc2.type)return"ifBreak("+printDoc(doc2.breakContents)+(doc2.flatContents?", "+printDoc(doc2.flatContents):"")+(doc2.groupId?(doc2.flatContents?"":', ""')+", { groupId: ".concat(printGroupId(doc2.groupId)," }"):"")+")";if("indent-if-break"===doc2.type){const optionsParts=[];doc2.negate&&optionsParts.push("negate: true"),doc2.groupId&&optionsParts.push("groupId: ".concat(printGroupId(doc2.groupId)));const options=optionsParts.length>0?", { ".concat(optionsParts.join(", ")," }"):"";return"indentIfBreak(".concat(printDoc(doc2.contents)).concat(options,")")}if("group"===doc2.type){const optionsParts=[];doc2.break&&"propagated"!==doc2.break&&optionsParts.push("shouldBreak: true"),doc2.id&&optionsParts.push("id: ".concat(printGroupId(doc2.id)));const options=optionsParts.length>0?", { ".concat(optionsParts.join(", ")," }"):"";return doc2.expandedStates?"conditionalGroup([".concat(doc2.expandedStates.map(part=>printDoc(part)).join(","),"]").concat(options,")"):"group(".concat(printDoc(doc2.contents)).concat(options,")")}if("fill"===doc2.type)return"fill([".concat(doc2.parts.map(part=>printDoc(part)).join(", "),"])");if("line-suffix"===doc2.type)return"lineSuffix("+printDoc(doc2.contents)+")";if("line-suffix-boundary"===doc2.type)return"lineSuffixBoundary";if("label"===doc2.type)return"label(".concat(JSON.stringify(doc2.label),", ").concat(printDoc(doc2.contents),")");throw new Error("Unknown doc type "+doc2.type)}function printGroupId(id){if("symbol"!=typeof id)return JSON.stringify(String(id));if(id in printedSymbols)return printedSymbols[id];const prefix=String(id).slice(7,-1)||"symbol";for(let counter=0;;counter++){const key=prefix+(counter>0?" #".concat(counter):"");if(!usedKeysForSymbols.has(key))return usedKeysForSymbols.add(key),printedSymbols[id]="Symbol.for(".concat(JSON.stringify(key),")")}}}module2.exports={printDocToDebug:printDocToDebug}}});init_define_process(),module.exports={builders:require_doc_builders(),printer:require_doc_printer(),utils:require_doc_utils(),debug:require_doc_debug()}}})()});
//# sourceMappingURL=doc.js.map
