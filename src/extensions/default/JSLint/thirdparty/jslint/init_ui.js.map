{"version":3,"sources":["extensions/default/JSLint/thirdparty/jslint/init_ui.js"],"names":["ADSAFE","lib","dom","edition","q","errors","errors_div","indent","jslint_dir","jslint_str","maxerr","maxlen","option","cookie","get","options","predefined","properties","properties_str","report","report_div","source","source_str","tristate","clear","style","value","select","clear_all","preventDefault","e","show_jslint_directive","a","result","keys","forEach","title","push","String","join","length","set","wire_tristate","bunch","each","b","getTitle","dfn","label","mouseover","mouseout","mousedown","click","state","klass","undefined","on","show_options","isArray","predef","clear_options","update_number","event","target","getValue","isFinite","update_list","split","jslint"],"mappings":"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","sourcesContent":["// init_ui.js\n// 2012-05-09\n\n// This is the web browser companion to fulljslint.js. It is an ADsafe\n// lib file that implements a web ui by adding behavior to the widget's\n// html tags.\n\n// It stores a function in lib.init_ui. Calling that function will\n// start up the JSLint widget ui.\n\n// option = {adsafe: true, fragment: false}\n\n/*properties\n    cookie, each, edition, forEach, get, getStyle, getTitle, getValue,\n    indent, isArray, join, jslint, keys, klass, length, lib, maxerr, maxlen, on,\n    predef, preventDefault, push, q, select, set, split, style, target, value\n*/\n\nADSAFE.lib(\"init_ui\", function (lib) {\n    'use strict';\n\n    return function (dom) {\n        var edition = dom.q('#JSLINT_EDITION'),\n            errors = dom.q('#JSLINT_ERRORS'),\n            errors_div = errors.q('>div'),\n            indent = dom.q('#JSLINT_INDENT'),\n            jslint_dir = dom.q('#JSLINT_JSLINT'),\n            jslint_str = jslint_dir.q('>textarea'),\n            maxerr = dom.q('#JSLINT_MAXERR'),\n            maxlen = dom.q('#JSLINT_MAXLEN'),\n            option = lib.cookie.get(),\n            options = dom.q('#JSLINT_OPTIONS'),\n            predefined = dom.q('#JSLINT_PREDEF'),\n            properties = dom.q('#JSLINT_PROPERTIES'),\n            properties_str = properties.q('>textarea'),\n            report = dom.q('#JSLINT_REPORT'),\n            report_div = report.q('>div'),\n            source = dom.q('#JSLINT_SOURCE'),\n            source_str = source.q('>textarea'),\n            tristate = {};\n\n        function clear() {\n            errors.style('display', 'none');\n            report.style('display', 'none');\n            properties.style('display', 'none');\n            errors_div.value('');\n            report_div.value('');\n            properties_str.value('');\n            source_str.select('');\n        }\n\n        function clear_all() {\n            source_str.value('');\n            clear();\n        }\n\n        function preventDefault(e) {\n            return e.preventDefault();\n        }\n\n        function show_jslint_directive() {\n\n// Build and display a /*jslint*/ control comment.\n// The comment can be copied into a .js file.\n\n            var a = [], result;\n\n            ADSAFE.keys(tristate).forEach(function (title) {\n                var value = ADSAFE.get(option, title);\n                if (typeof value === 'boolean') {\n                    a.push(title + ': ' + String(value));\n                }\n            });\n            if (typeof option.indent === 'number' && option.indent >= 0) {\n                a.push('indent: ' + String(option.indent));\n            }\n            if (typeof option.maxerr === 'number' && option.maxerr >= 0) {\n                a.push('maxerr: ' + String(option.maxerr));\n            }\n            if (typeof option.maxlen === 'number' && option.maxlen >= 0) {\n                a.push('maxlen: ' + String(option.maxlen));\n            }\n            result = '/*jslint ' + a.join(', ') + ' */';\n            jslint_str.value(result);\n            jslint_dir.style('display', result.length > 12 ? 'block' : 'none');\n\n// Make a JSON cookie of the option object.\n\n            lib.cookie.set(option);\n        }\n\n        function wire_tristate(bunch) {\n            bunch.each(function (b) {\n                var title = b.getTitle(),\n                    dfn = b.q('>button'),\n                    label = b.q('>var');\n                ADSAFE.set(tristate, title, label);\n\n                function mouseover(e) {\n                    dfn.style('backgroundColor', 'cornflowerblue');\n                    e.preventDefault();\n                }\n\n                function mouseout() {\n                    dfn.style('backgroundColor', 'lightsteelblue');\n                }\n\n                function mousedown() {\n                    dfn.style('backgroundColor', 'steelblue');\n                }\n\n                function click() {\n                    var state = ADSAFE.get(option, title);\n                    if (state === true) {\n                        ADSAFE.set(option, title, false);\n                        label\n                            .value('false')\n                            .klass('false');\n                    } else if (state === false) {\n                        ADSAFE.set(option, title, undefined);\n                        label\n                            .value('default')\n                            .klass('');\n                    } else {\n                        ADSAFE.set(option, title, true);\n                        label\n                            .value('true')\n                            .klass('true');\n                    }\n                    show_jslint_directive();\n                }\n\n                dfn\n                    .on('mouseover', mouseover)\n                    .on('mouseout', mouseout)\n                    .on('mousedown', mousedown)\n                    .on('mouseup', mouseover)\n                    .on('mousemove', preventDefault)\n                    .on('click', click);\n                label\n                    .on('mouseover', mouseover)\n                    .on('mouseout', mouseout)\n                    .on('mousedown', mousedown)\n                    .on('mouseup', mouseover)\n                    .on('mousemove', preventDefault)\n                    .on('click', click);\n                mouseout();\n            });\n        }\n\n\n        function show_options() {\n            indent.value(String(option.indent || ''));\n            maxlen.value(String(option.maxlen || ''));\n            maxerr.value(String(option.maxerr || ''));\n            predefined.value(ADSAFE.isArray(option.predef)\n                ? option.predef.join(' ')\n                : '');\n            ADSAFE.keys(tristate).forEach(function (title) {\n                var value = ADSAFE.get(option, title);\n                if (typeof value === 'boolean') {\n                    ADSAFE.get(tristate, title)\n                        .klass(String(value))\n                        .value(String(value));\n                } else {\n                    ADSAFE.get(tristate, title)\n                        .klass('')\n                        .value('default');\n                }\n            });\n            show_jslint_directive();\n        }\n\n        function clear_options() {\n            option = {};\n            show_options();\n        }\n\n        function update_number(event) {\n            var value = event.target.getValue();\n            if (value.length === 0 || +value < 0 || !isFinite(value)) {\n                value = '';\n                ADSAFE.set(option, event.target.getTitle(), '');\n            } else {\n                ADSAFE.set(option, event.target.getTitle(), +value);\n            }\n            event.target.value(String(value));\n            show_jslint_directive();\n        }\n\n        function update_list(event) {\n            var value = event.target.getValue().split(/[\\s,;'\"]+/);\n            ADSAFE.set(option, event.target.getTitle(), value);\n            event.target.value(value.join(' '));\n            show_jslint_directive();\n        }\n\n\n// Restore the options from a JSON cookie.\n\n        if (!option || typeof option !== 'object') {\n            option = {};\n        }\n        wire_tristate(options.q('div.tristate>div[title]'));\n        source.q('>button').on('click', clear_all);\n        dom.q('#JSLINT_BUTTON').on('click', function () {\n            clear();\n            if (lib.jslint(source_str.getValue(), option,\n                    errors_div, report_div, properties_str, edition)) {\n                errors.style('display', 'block');\n            }\n            report.style('display', 'block');\n            if (properties_str.getValue().length > 21) {\n                properties.style('display', 'block');\n            }\n            source_str.select();\n            return false;\n        });\n        errors.q('>button').on('click', clear);\n        report.q('>button').on('click', clear);\n        properties.q('>button').on('click', function () {\n            properties_str.select();\n        });\n        options.q('>button').on('click', clear_options);\n        jslint_dir.q('>button').on('click', function () {\n            jslint_str.select();\n        });\n        clear();\n        show_options();\n\n// Display the edition.\n\n        edition.value('Edition ' + lib.edition());\n\n        indent.on('change', update_number);\n        maxerr.on('change', update_number);\n        maxlen.on('change', update_number);\n        predefined.on('change', update_list);\n    };\n});\n"],"file":"init_ui.js"}