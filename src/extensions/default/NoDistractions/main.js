define(function(require,exports,module){var Menus=brackets.getModule("command/Menus"),CommandManager=brackets.getModule("command/CommandManager"),Commands=brackets.getModule("command/Commands"),Strings=brackets.getModule("strings"),PreferencesManager=brackets.getModule("preferences/PreferencesManager"),ViewUtils=brackets.getModule("utils/ViewUtils"),KeyBindingManager=brackets.getModule("command/KeyBindingManager"),Metrics=brackets.getModule("utils/Metrics"),WorkspaceManager=brackets.getModule("view/WorkspaceManager"),PREFS_PURE_CODE="noDistractions",CMD_TOGGLE_PURE_CODE="view.togglePureCode",CMD_TOGGLE_PANELS="view.togglePanels",togglePureCodeKey="Ctrl-Shift-2",togglePureCodeKeyMac="Cmd-Shift-2",togglePanelsKey="Ctrl-Shift-1",togglePanelsKeyMac="Cmd-Shift-1",togglePanelsKey_EN="Ctrl-Shift-`",togglePanelsKeyMac_EN="Cmd-Shift-`",_previouslyOpenPanelIDs=[],panelsToggled=!1,layoutUpdated=!1;function _updateCheckedState(){CommandManager.get(CMD_TOGGLE_PURE_CODE).setChecked(PreferencesManager.get(PREFS_PURE_CODE))}function _togglePureCode(){PreferencesManager.set(PREFS_PURE_CODE,!PreferencesManager.get(PREFS_PURE_CODE)),Metrics.countEvent(Metrics.EVENT_TYPE.UI,"noDistractions","toggle")}function _hidePanelsIfRequired(){var panelIDs=WorkspaceManager.getAllPanelIDs();_previouslyOpenPanelIDs=[],panelIDs.forEach(function(panelID){var panel=WorkspaceManager.getPanelForID(panelID);panel&&panel.isVisible()&&(panel.hide(),_previouslyOpenPanelIDs.push(panelID))})}function _showPanelsIfRequired(){var panelIDs;_previouslyOpenPanelIDs.forEach(function(panelID){var panel=WorkspaceManager.getPanelForID(panelID);panel&&panel.show()}),_previouslyOpenPanelIDs=[]}function _updateLayout(){layoutUpdated=!0,panelsToggled=!1}function _togglePanels(){(panelsToggled=!panelsToggled)?(_hidePanelsIfRequired(),layoutUpdated=!1,panelsToggled=!0):layoutUpdated||_showPanelsIfRequired(),Metrics.countEvent(Metrics.EVENT_TYPE.UI,"noDistractions","togglePanels")}function initializeCommands(){CommandManager.register(Strings.CMD_TOGGLE_PURE_CODE,CMD_TOGGLE_PURE_CODE,_togglePureCode),CommandManager.register(Strings.CMD_TOGGLE_PANELS,CMD_TOGGLE_PANELS,_togglePanels),Menus.getMenu(Menus.AppMenuBar.VIEW_MENU).addMenuItem(CMD_TOGGLE_PANELS,"",Menus.AFTER,Commands.VIEW_HIDE_SIDEBAR),Menus.getMenu(Menus.AppMenuBar.VIEW_MENU).addMenuItem(CMD_TOGGLE_PURE_CODE,"",Menus.AFTER,CMD_TOGGLE_PANELS),KeyBindingManager.addBinding(CMD_TOGGLE_PURE_CODE,[{key:togglePureCodeKey},{key:togglePureCodeKeyMac,platform:"mac"}]),KeyBindingManager.addBinding(CMD_TOGGLE_PANELS,[{key:togglePanelsKey},{key:togglePanelsKeyMac,platform:"mac"}]),KeyBindingManager.addBinding(CMD_TOGGLE_PANELS,[{key:togglePanelsKey_EN},{key:togglePanelsKeyMac_EN,platform:"mac"}])}PreferencesManager.definePreference(PREFS_PURE_CODE,"boolean",!1,{description:Strings.DESCRIPTION_PURE_CODING_SURFACE}),PreferencesManager.on("change",PREFS_PURE_CODE,function(){PreferencesManager.get(PREFS_PURE_CODE)?(ViewUtils.hideMainToolBar(),CommandManager.execute(Commands.HIDE_SIDEBAR),_hidePanelsIfRequired()):(ViewUtils.showMainToolBar(),CommandManager.execute(Commands.SHOW_SIDEBAR),_showPanelsIfRequired()),_updateCheckedState()}),WorkspaceManager.on(WorkspaceManager.EVENT_WORKSPACE_PANEL_SHOWN,_updateLayout),initializeCommands()});
//# sourceMappingURL=main.js.map
