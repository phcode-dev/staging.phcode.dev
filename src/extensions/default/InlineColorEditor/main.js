define(function(require,exports,module){var EditorManager=brackets.getModule("editor/EditorManager"),ExtensionUtils=brackets.getModule("utils/ExtensionUtils"),InlineColorEditor=require("InlineColorEditor").InlineColorEditor,ColorUtils=brackets.getModule("utils/ColorUtils");function prepareEditorForProvider(hostEditor,pos){var colorRegEx,cursorLine,match,sel,start,end,endPos,marker;if((sel=hostEditor.getSelection()).start.line!==sel.end.line)return null;colorRegEx=new RegExp(ColorUtils.COLOR_REGEX),cursorLine=hostEditor.document.getLine(pos.line);do{(match=colorRegEx.exec(cursorLine))&&(end=(start=match.index)+match[0].length)}while(match&&(pos.ch<start||pos.ch>end));return match?(pos.ch=start,endPos={line:pos.line,ch:end},marker=hostEditor._codeMirror.markText(pos,endPos),hostEditor.setSelection(pos,endPos),{color:match[0],marker:marker}):null}function inlineColorEditorProvider(hostEditor,pos){var context=prepareEditorForProvider(hostEditor,pos),inlineColorEditor,result;return context?((inlineColorEditor=new InlineColorEditor(context.color,context.marker)).load(hostEditor),(result=new $.Deferred).resolve(inlineColorEditor),result.promise()):null}ExtensionUtils.loadStyleSheet(module,"css/main.less"),EditorManager.registerInlineEditProvider(inlineColorEditorProvider),exports.prepareEditorForProvider=prepareEditorForProvider,exports.inlineColorEditorProvider=inlineColorEditorProvider});
//# sourceMappingURL=main.js.map
