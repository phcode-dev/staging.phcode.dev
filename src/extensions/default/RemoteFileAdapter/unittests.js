define(function(require,exports,module){var SpecRunnerUtils=brackets.getModule("spec/SpecRunnerUtils"),CommandManager,Commands,Dialogs,MainViewManager,REMOTE_FILE_PATH="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",INVALID_REMOTE_FILE_PATH="https://something.not.present/a.html";describe("extension:RemoteFileAdapter",function(){var testWindow;function createRemoteFile(filePath){return CommandManager.execute(Commands.FILE_OPEN,{fullPath:filePath})}function deleteCurrentRemoteFile(){return CommandManager.execute(Commands.FILE_DELETE)}function saveRemoteFile(){return CommandManager.execute(Commands.FILE_SAVE)}function renameRemoteFile(filePath){return CommandManager.execute(Commands.FILE_RENAME)}function closeRemoteFile(filePath){return CommandManager.execute(Commands.FILE_CLOSE,{fullPath:filePath})}beforeAll(async function(){testWindow=await SpecRunnerUtils.createTestWindowAndRun(),MainViewManager=testWindow.brackets.test.MainViewManager,CommandManager=testWindow.brackets.test.CommandManager,Dialogs=testWindow.brackets.test.Dialogs,Commands=testWindow.brackets.test.Commands,spyOn(Dialogs,"showModalDialog").and.callFake(function(dlgClass,title,message,buttons){return console.warn(title,message),{done:function(callback){callback(Dialogs.DIALOG_BTN_OK)}}})},3e4),beforeEach(function(){Dialogs.showModalDialog.calls.reset()}),afterAll(async function(){testWindow=null,await SpecRunnerUtils.closeTestWindow()}),it("Open/close remote https file",async function(){await awaitsForDone(createRemoteFile(REMOTE_FILE_PATH)),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(1),await awaitsForDone(closeRemoteFile(REMOTE_FILE_PATH)),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(0)}),it("Open invalid remote file",async function(){await awaitsForFail(createRemoteFile(INVALID_REMOTE_FILE_PATH)),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(0),expect(Dialogs.showModalDialog).toHaveBeenCalled(),expect(Dialogs.showModalDialog.calls.count()).toBe(1)}),it("Save remote file",async function(){await awaitsForDone(createRemoteFile(REMOTE_FILE_PATH)),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(1),await awaitsForFail(saveRemoteFile()),await awaitsForDone(closeRemoteFile(REMOTE_FILE_PATH)),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(0)}),it("Delete remote file",async function(){await awaitsForDone(createRemoteFile(REMOTE_FILE_PATH)),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(1),await awaitsForDone(deleteCurrentRemoteFile()),expect(Dialogs.showModalDialog).toHaveBeenCalled(),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(1),await awaitsForDone(closeRemoteFile(REMOTE_FILE_PATH)),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(0)}),it("Rename remote file",async function(){await awaitsForDone(createRemoteFile(REMOTE_FILE_PATH)),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(1),await awaitsForFail(renameRemoteFile()),expect(MainViewManager.getWorkingSet(MainViewManager.ACTIVE_PANE).length).toEqual(1)})})});
//# sourceMappingURL=unittests.js.map
