define(function(require,exports,module){const ProjectManager=brackets.getModule("project/ProjectManager"),Strings=brackets.getModule("strings"),DocumentManager=brackets.getModule("document/DocumentManager");function getExtension(filePath){let pathSplit=(filePath=filePath||"").split(".");return pathSplit&&pathSplit.length>1?pathSplit[pathSplit.length-1]:""}function isPreviewableFile(filePath){let extension=getExtension(filePath);return["html","htm","jpg","jpeg","png","svg","pdf","md","markdown"].includes(extension.toLowerCase())}function _isMarkdownFile(filePath){let extension=getExtension(filePath);return["md","markdown"].includes(extension.toLowerCase())}function _isHTMLFile(filePath){let extension=getExtension(filePath);return["html","htm"].includes(extension.toLowerCase())}function getNoPreviewURL(){return`${window.Phoenix.baseURL}assets/phoenix-splash/no-preview.html?jsonInput=`+encodeURIComponent(`{"heading":"${Strings.DESCRIPTION_LIVEDEV_NO_PREVIEW}",`+`"details":"${Strings.DESCRIPTION_LIVEDEV_NO_PREVIEW_DETAILS}"}`)}async function getPreviewDetails(){return new Promise(async(resolve,reject)=>{try{const projectRoot=ProjectManager.getProjectRoot().fullPath,projectRootUrl=`${window.fsServerUrl}PHOENIX_LIVE_PREVIEW_${Phoenix.PHOENIX_INSTANCE_ID}${projectRoot}`,currentDocument=DocumentManager.getCurrentDocument(),currentFile=currentDocument?currentDocument.file:ProjectManager.getSelectedItem();if(currentFile){let fullPath=currentFile.fullPath,httpFilePath=null;if((fullPath.startsWith("http://")||fullPath.startsWith("https://"))&&(httpFilePath=fullPath),isPreviewableFile(fullPath)){const filePath=httpFilePath||path.relative(projectRoot,fullPath);let URL;return void resolve({URL:httpFilePath||`${projectRootUrl}${filePath}`,filePath:filePath,fullPath:fullPath,isMarkdownFile:_isMarkdownFile(fullPath),isHTMLFile:_isHTMLFile(fullPath)})}}resolve({URL:getNoPreviewURL(),isNoPreview:!0})}catch(e){reject(e)}})}exports.getPreviewDetails=getPreviewDetails,exports.getNoPreviewURL=getNoPreviewURL,exports.getExtension=getExtension,exports.isPreviewableFile=isPreviewableFile});
//# sourceMappingURL=utils.js.map
