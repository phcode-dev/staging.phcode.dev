define(function(require,exports,module){const SpecRunnerUtils=brackets.getModule("spec/SpecRunnerUtils");describe("integration:HTML Code Hints integration tests",function(){const testPath=SpecRunnerUtils.getTestPath("/spec/LiveDevelopment-MultiBrowser-test-files");let FileViewController,ProjectManager,CommandManager,Commands,testWindow,EditorManager,MainViewManager,brackets;async function closeSession(){await awaitsForDone(CommandManager.execute(Commands.FILE_CLOSE_ALL,{_forceClose:!0}),"closing all file")}async function verifySrcJumpToDef(location,targetFileName,jumpShouldFail){await awaitsForDone(FileViewController.openAndSelectDocument(testPath+"/jumpToDef.html",FileViewController.PROJECT_MANAGER));const selected=ProjectManager.getSelectedItem();let editor;expect(selected.fullPath).toBe(testPath+"/jumpToDef.html"),EditorManager.getActiveEditor().setCursorPos(location),jumpShouldFail?await awaitsForFail(CommandManager.execute(Commands.NAVIGATE_JUMPTO_DEFINITION),"jump to def on div"):await awaitsForDone(CommandManager.execute(Commands.NAVIGATE_JUMPTO_DEFINITION),"jump to def on div");let currentFile=MainViewManager.getCurrentlyViewedFile();expect(currentFile.fullPath.endsWith(targetFileName)).toBeTrue(),await closeSession()}beforeAll(async function(){testWindow=await SpecRunnerUtils.createTestWindowAndRun(),brackets=testWindow.brackets,FileViewController=brackets.test.FileViewController,ProjectManager=brackets.test.ProjectManager,CommandManager=brackets.test.CommandManager,Commands=brackets.test.Commands,EditorManager=brackets.test.EditorManager,MainViewManager=brackets.test.MainViewManager,await SpecRunnerUtils.loadProjectInTestWindow(testPath)},3e4),afterAll(function(){FileViewController=null,ProjectManager=null,testWindow=null,brackets=null}),it("Should jump to definition on div tag",async function(){await awaitsForDone(FileViewController.openAndSelectDocument(testPath+"/jumpToDef.html",FileViewController.PROJECT_MANAGER));const selected=ProjectManager.getSelectedItem();expect(selected.fullPath).toBe(testPath+"/jumpToDef.html");let editor=EditorManager.getActiveEditor();editor.setCursorPos({line:5,ch:6}),await awaitsForDone(CommandManager.execute(Commands.NAVIGATE_JUMPTO_DEFINITION),"jump to def on div"),editor=EditorManager.getFocusedInlineEditor(),expect(editor.document.file.fullPath.endsWith("LiveDevelopment-MultiBrowser-test-files/simpleShared.css")).toBeTrue(),await closeSession()}),it("Should jump to definition on css class",async function(){await awaitsForDone(FileViewController.openAndSelectDocument(testPath+"/jumpToDef.html",FileViewController.PROJECT_MANAGER));const selected=ProjectManager.getSelectedItem();expect(selected.fullPath).toBe(testPath+"/jumpToDef.html");let editor=EditorManager.getActiveEditor();editor.setCursorPos({line:6,ch:23}),await awaitsForDone(CommandManager.execute(Commands.NAVIGATE_JUMPTO_DEFINITION),"jump to def on div"),editor=EditorManager.getFocusedInlineEditor(),expect(editor.document.file.fullPath.endsWith("LiveDevelopment-MultiBrowser-test-files/sub/test.css")).toBeTrue(),await closeSession()}),it("Should jump to files on href/src attributes",async function(){await verifySrcJumpToDef({line:3,ch:44},"sub/test.css"),await verifySrcJumpToDef({line:13,ch:29},"blank.css"),await verifySrcJumpToDef({line:11,ch:32},"sub/icon_chevron.png"),await closeSession()}),it("Should not jump to files on non href/src attributes",async function(){await verifySrcJumpToDef({line:14,ch:47},"jumpToDef.html",!0),await verifySrcJumpToDef({line:7,ch:20},"jumpToDef.html",!0),await verifySrcJumpToDef({line:3,ch:22},"jumpToDef.html",!0),await closeSession()})})});
//# sourceMappingURL=integ-tests.js.map
