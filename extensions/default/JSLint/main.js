define(function(require,exports,module){require("thirdparty/jslint/jslint");var CodeInspection=brackets.getModule("language/CodeInspection"),Editor=brackets.getModule("editor/Editor").Editor,PreferencesManager=brackets.getModule("preferences/PreferencesManager"),Strings=brackets.getModule("strings"),_=brackets.getModule("thirdparty/lodash"),prefs=PreferencesManager.getExtensionPrefs("jslint"),_lastRunOptions;prefs.definePreference("options","object",void 0,{description:Strings.DESCRIPTION_JSLINT_OPTIONS,keys:{ass:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_ASS,initial:!1},bitwise:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_BITWISE,initial:!1},browser:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_BROWSER,initial:!1},closure:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_CLOSURE,initial:!1},continue:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_CONTINUE,initial:!1},couch:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_COUCH,initial:!1},debug:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_DEBUG,initial:!1},devel:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_DEVEL,initial:!1},eqeq:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_EQEQ,initial:!1},es6:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_ES6,initial:!1},evil:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_EVIL,initial:!1},forin:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_FORIN,initial:!1},indent:{type:"number",description:Strings.DESCRIPTION_JSLINT_OPTIONS_INDENT},maxerr:{type:"number",description:Strings.DESCRIPTION_JSLINT_OPTIONS_MAXERR},maxlen:{type:"number",description:Strings.DESCRIPTION_JSLINT_OPTIONS_MAXLEN},newcap:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_NEWCAP,initial:!1},node:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_NODE,initial:!1},nomen:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_NOMEN,initial:!1},passfail:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_PASSFAIL,initial:!1},plusplus:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_PLUSPLUS,initial:!1},regexp:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_REGEXP,initial:!1},rhino:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_RHINO,initial:!1},sloppy:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_SLOPPY,initial:!1},stupid:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_STUPID,initial:!1},sub:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_SUB,initial:!1},todo:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_TODO,initial:!1},unparam:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_UNPARAM,initial:!1},vars:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_VARS,initial:!1},white:{type:"boolean",description:Strings.DESCRIPTION_JSLINT_OPTIONS_WHITE,initial:!1}}}).on("change",function(e,data){var options=prefs.get("options");_.isEqual(options,_lastRunOptions)||CodeInspection.requestRun(Strings.JSLINT_NAME)});var ENVIRONMENTS=["browser","node","couch","rhino"];function _getIndentSize(fullPath){return Editor.getUseTabChar(fullPath)?Editor.getTabSize(fullPath):Editor.getSpaceUnits(fullPath)}function lintOneFile(text,fullPath){text=text.replace(/^[ \t]+$/gm,"");var options=prefs.get("options"),hasEnvironment,jslintResult;if(_lastRunOptions=_.clone(options),(options=options?_.clone(options):{}).indent||(options.indent=_getIndentSize(fullPath)),_.some(ENVIRONMENTS,function(env){return void 0!==options[env]})||(options.browser=!0),!JSLINT(text,options)){var errors=JSLINT.errors.filter(function(err){return null!==err}),result={errors:errors=errors.map(function(jslintError){return{pos:{line:jslintError.line-1,ch:jslintError.character-1},message:jslintError.reason,type:CodeInspection.Type.WARNING}})};return errors.length!==JSLINT.errors.length&&(result.aborted=!0,errors[errors.length-1].type=CodeInspection.Type.META),result}return null}CodeInspection.register("javascript",{name:Strings.JSLINT_NAME,scanFile:lintOneFile})});
//# sourceMappingURL=main.js.map
