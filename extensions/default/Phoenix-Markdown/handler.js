define(function(require,exports,module){var EditorManager=brackets.getModule("editor/EditorManager"),Lines=require("lines"),Paragraphs=require("paragraphs"),Selections=require("selections"),Dialogs=require("dialogs"),MATCH_H1=/^(\s{0,3}|\s*\*\s*)(#\s)/,MATCH_H2=/^(\s{0,3}|\s*\*\s*)(##\s)/,MATCH_H3=/^(\s{0,3}|\s*\*\s*)(###\s)/,MATCH_H4=/^(\s{0,3}|\s*\*\s*)(####\s)/,MATCH_H5=/^(\s{0,3}|\s*\*\s*)(#####\s)/,MATCH_H6=/^(\s{0,3}|\s*\*\s*)(######\s)/,MATCH_HD=/^(\s{0,3}|\s*\*\s*)(#+\s)/,MATCH_BULLET=/^\s*\*\s/,MATCH_NUMBERED=/^\s*\d\.\s/,MATCH_QUOTE=/^\s*>\s/,MATCH_LIST=/^\s*(\*|>|\d\.)\s/;function check(editor){if(!editor)return!1;var mode=editor._getModeFromDocument(),cursor;return("gfm"===mode||"markdown"===mode)&&!!editor.getCursorPos(!1,"to").line}function handleLineButton(regexp,replace,after,insert){var editor=EditorManager.getActiveEditor();check(editor)&&(Lines.allLinesOn(editor,regexp)?Lines.turnLinesOff(editor,regexp,after):Lines.turnLinesOn(editor,regexp,replace,after,insert))}function handleSelectionButton(match,badMatch){var editor=EditorManager.getActiveEditor();check(editor)&&(Selections.allSelectionsOn(editor,match,badMatch)?Selections.turnSelectionsOff(editor,match,badMatch):Selections.turnSelectionsOn(editor,match,badMatch))}exports.h1=function(){handleLineButton(MATCH_H1,MATCH_HD,MATCH_BULLET,"# ")},exports.h2=function(){handleLineButton(MATCH_H2,MATCH_HD,MATCH_BULLET,"## ")},exports.h3=function(){handleLineButton(MATCH_H3,MATCH_HD,MATCH_BULLET,"### ")},exports.h4=function(){handleLineButton(MATCH_H4,MATCH_HD,MATCH_BULLET,"#### ")},exports.h5=function(){handleLineButton(MATCH_H5,MATCH_HD,MATCH_BULLET,"##### ")},exports.h6=function(){handleLineButton(MATCH_H6,MATCH_HD,MATCH_BULLET,"###### ")},exports.bold=function(){handleSelectionButton("**","")},exports.italic=function(){handleSelectionButton("*","**")},exports.strikethrough=function(){handleSelectionButton("~~","")},exports.code=function(){handleSelectionButton("`","")},exports.image=function(){var editor=EditorManager.getActiveEditor();check(editor)&&Dialogs.image(editor)},exports.link=function(){var editor=EditorManager.getActiveEditor();check(editor)&&Dialogs.link(editor)},exports.bullet=function(){handleLineButton(MATCH_BULLET,MATCH_LIST,null,"* ")},exports.numbered=function(){handleLineButton(MATCH_NUMBERED,MATCH_LIST,null,"1. ")},exports.quote=function(){handleLineButton(MATCH_QUOTE,MATCH_LIST,null,"> ")},exports.codeblock=function(){var editor=EditorManager.getActiveEditor();check(editor)&&Paragraphs.codeblock(editor)},exports.paragraph=function(){var editor=EditorManager.getActiveEditor();check(editor)&&Paragraphs.paragraph(editor)},exports.reflow=function(){var editor=EditorManager.getActiveEditor();check(editor)&&Paragraphs.reflow(editor)}});
//# sourceMappingURL=handler.js.map
