define(function(require,exports,module){function _everySelection(editor,fn){var i,selections=editor.getSelections();for(i=0;i<selections.length;i++){var state=fn(selections[i]);if(state&&state.done)return state.result}}function _match(editor,match,start,end){var matchLength=match.length;if(matchLength<1)return!1;var startMatch="";if(start.ch>=matchLength){var preStart={line:start.line,ch:start.ch-matchLength};startMatch=editor.document.getRange(preStart,start)}var postEnd={line:end.line,ch:end.ch+matchLength},endMatch=editor.document.getRange(end,postEnd);return startMatch===match&&endMatch===match}function _isOn(editor,match,badMatch,start,end){return _match(editor,match,start,end)&&!_match(editor,badMatch,start,end)}function _turnOn(editor,start,end,insert){var existing=editor.document.getRange(start,end);editor.document.replaceRange(insert+existing+insert,start,end,"+mdbar")}function _turnOff(editor,start,end,remove){var preStart={line:start.line,ch:start.ch-remove.length},preEnd={line:end.line,ch:end.ch-remove.length};editor.document.replaceRange("",preStart,start,"+mdbar"),editor.document.replaceRange("",preEnd,end,"+mdbar")}exports.allSelectionsOn=function(editor,match,badMatch){if(!editor.hasSelection()){var cursor=editor.getCursorPos(!1,"to");return _isOn(editor,match,badMatch,cursor,cursor)}var result=_everySelection(editor,function(selection){if(!_isOn(editor,match,badMatch,selection.start,selection.end))return{done:!0,result:!1}});return void 0===result||result},exports.turnSelectionsOn=function(editor,insert,badMatch){if(editor.hasSelection())_everySelection(editor,function(selection){_isOn(editor,insert,badMatch,selection.start,selection.end)||(_turnOn(editor,selection.start,selection.end,insert),selection.end={line:selection.end.line,ch:selection.end.ch-insert.length})});else{var cursor=editor.getCursorPos(!1,"to");_turnOn(editor,cursor,cursor,insert),editor.setCursorPos({line:cursor.line,ch:cursor.ch+insert.length})}},exports.turnSelectionsOff=function(editor,remove,badMatch){if(editor.hasSelection())_everySelection(editor,function(selection){_isOn(editor,remove,badMatch,selection.start,selection.end)&&_turnOff(editor,selection.start,selection.end,remove)});else{var cursor=editor.getCursorPos(!1,"to");_turnOff(editor,cursor,cursor,remove)}}});
//# sourceMappingURL=selections.js.map
