define(function(require,exports,module){var AppInit=brackets.getModule("utils/AppInit"),CodeHintManager=brackets.getModule("editor/CodeHintManager"),TokenUtils=brackets.getModule("utils/TokenUtils"),PseudoRulesText=require("text!PseudoSelectors.json"),PseudoRules=JSON.parse(PseudoRulesText),TOKEN_TYPE_PSEUDO_CLASS=0,TOKEN_TYPE_PSEUDO_ELEMENT=1,PUNCTUATION_CHAR=":";function _getPseudoContext(token,cursorText,ctx){var slicedToken,contextType=-1;return"pseudo"===token.state.state?slicedToken=cursorText.substr(0,token.start+1).slice(-3):"variable-3"===token.type&&(slicedToken=cursorText.substr(0,token.start).slice(-3)),slicedToken?"::"===slicedToken.slice(-2)?contextType=TOKEN_TYPE_PSEUDO_ELEMENT:":"===slicedToken.slice(-1)&&(contextType=TOKEN_TYPE_PSEUDO_CLASS):(TokenUtils.movePrevToken(ctx),contextType=ctx.token.string===PUNCTUATION_CHAR?TOKEN_TYPE_PSEUDO_ELEMENT:TOKEN_TYPE_PSEUDO_CLASS),contextType}function PseudoSelectorHints(){}function _validatePseudoContext(token){return"pseudo"===token.state.state||"variable-3"===token.type||token.string===PUNCTUATION_CHAR}PseudoSelectorHints.prototype.hasHints=function(editor,implicitChar){var pos=editor.getCursorPos(),token=editor._codeMirror.getTokenAt(pos);return this.editor=editor,_validatePseudoContext(token)},PseudoSelectorHints.prototype.getHints=function(implicitChar){var pos=this.editor.getCursorPos(),token=this.editor._codeMirror.getTokenAt(pos),filter="variable-3"===token.type?token.string:"",lineTillCursor=this.editor._codeMirror.getLine(pos.line),ctx=TokenUtils.getInitialContext(this.editor._codeMirror,pos),result;return _validatePseudoContext(token)?(this.context=_getPseudoContext(token,lineTillCursor,ctx),-1===this.context?null:(this.token=token,{hints:Object.keys(this.context===TOKEN_TYPE_PSEUDO_CLASS?PseudoRules.classes:PseudoRules.elements).filter(function(key){if(0===key.indexOf(filter))return key}).sort(),match:filter,selectInitial:!0,defaultDescriptionWidth:!0,handleWideResults:!1})):null},PseudoSelectorHints.prototype.insertHint=function(completion){var cursor=this.editor.getCursorPos(),startPos={line:cursor.line,ch:this.token.start},endPos={line:cursor.line,ch:this.token.end};return"pseudo"===this.token.state.state&&(startPos.ch=startPos.ch+1,endPos=startPos),this.context===TOKEN_TYPE_PSEUDO_CLASS&&(completion=PseudoRules.classes[completion].text||completion),this.editor.document.replaceRange(completion,startPos,endPos),")"===completion.slice(-1)&&(cursor=this.editor.getCursorPos(),this.editor.setCursorPos({line:cursor.line,ch:cursor.ch-1})),!1},AppInit.appReady(function(){var pseudoSelectorHints=new PseudoSelectorHints;CodeHintManager.registerHintProvider(pseudoSelectorHints,["css","scss","less"],0),exports.pseudoSelectorHints=pseudoSelectorHints})});
//# sourceMappingURL=main.js.map
