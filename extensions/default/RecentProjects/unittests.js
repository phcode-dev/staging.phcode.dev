define(function(require,exports,module){var SpecRunnerUtils=brackets.getModule("spec/SpecRunnerUtils"),FileUtils=brackets.getModule("file/FileUtils"),KeyEvent=brackets.getModule("utils/KeyEvent"),_=brackets.getModule("thirdparty/lodash");describe("extension:Recent Projects",function(){var extensionPath=FileUtils.getNativeModuleDirectoryPath(module),testWindow,$,CommandManager,PreferencesManager;async function openRecentProjectDropDown(){CommandManager.execute("recentProjects.toggle"),await awaitsFor(function(){return $("#project-dropdown").is(":visible")})}function setupRecentProjectsSpy(howManyProjects){spyOn(PreferencesManager,"getViewState").and.callFake(function(prefId){return"recentProjects"===prefId?_.map(_.range(1,howManyProjects+1),function(num){return extensionPath+"/Test-Project-"+num}):[]})}beforeAll(async function(){testWindow=await SpecRunnerUtils.createTestWindowAndRun(),$=testWindow.$,CommandManager=testWindow.brackets.test.CommandManager,PreferencesManager=testWindow.brackets.test.PreferencesManager},3e4),afterAll(async function(){testWindow=null,await SpecRunnerUtils.closeTestWindow()}),describe("UI",function(){it("should open the recent projects list with only the getting started project",async function(){await openRecentProjectDropDown();var $dropDown=$("#project-dropdown");expect($dropDown.children().length).toEqual(2)}),it("should open the recent project list and show 5 recent projects",async function(){setupRecentProjectsSpy(5),await openRecentProjectDropDown();var $dropDown=$("#project-dropdown");expect($dropDown.find(".recent-folder-link").length).toEqual(5)}),it("should delete one project from recent project list when delete key is pressed on",async function(){setupRecentProjectsSpy(5),await openRecentProjectDropDown();var $dropDown=$("#project-dropdown");SpecRunnerUtils.simulateKeyEvent(KeyEvent.DOM_VK_DOWN,"keydown",$dropDown[0]),SpecRunnerUtils.simulateKeyEvent(KeyEvent.DOM_VK_DELETE,"keydown",$dropDown[0]);var $dropDown=$("#project-dropdown");expect($dropDown.find(".recent-folder-link").length).toEqual(4)})})})});
//# sourceMappingURL=unittests.js.map
