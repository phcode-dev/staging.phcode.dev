{"version":3,"sources":["view/PluginPanelView.js"],"names":["define","require","exports","module","EventDispatcher","EVENT_PANEL_SHOWN","EVENT_PANEL_HIDDEN","PANEL_TYPE_PLUGIN_PANEL","Panel","$panel","id","$toolbarIcon","minWidth","initialSize","this","panelID","$mainPluginPanel","$","prototype","isVisible","is","registerCanBeShownHandler","canShowHandlerFn","canBeShownHandler","console","warn","canBeShown","self","show","addClass","trigger","hide","removeClass","setVisible","visible","getPanelType","makeEventDispatcher"],"mappings":"AAwBAA,OAAO,SAAUC,QAASC,QAASC,QAE/B,MAAMC,gBAAkBH,QAAQ,yBAC5BI,kBAAoB,aACpBC,mBAAqB,cACrBC,wBAA0B,cAc9B,SAASC,MAAMC,OAAQC,GAAIC,aAAcC,SAAUC,aAC/CC,KAAKL,OAASA,OACdK,KAAKC,QAAUL,GACfI,KAAKH,aAAeA,aACpBG,KAAKF,SAAWA,SAChBE,KAAKE,iBAAmBC,EAAE,sBAC1BH,KAAKD,YAAcA,YAOvBL,MAAMU,UAAUT,OAAS,KAMzBD,MAAMU,UAAUC,UAAY,WACxB,OAAOL,KAAKL,OAAOW,GAAG,aAU1BZ,MAAMU,UAAUG,0BAA4B,SAAUC,kBAC/CR,KAAKS,mBAAqBD,kBACzBE,QAAQC,wDAAwDX,KAAKC,gCAEzED,KAAKS,kBAAoBD,kBAO7Bd,MAAMU,UAAUQ,WAAa,WACzB,IAAIC,KAAOb,KACX,OAAGa,KAAKJ,mBACGI,KAAKJ,qBAQpBf,MAAMU,UAAUU,KAAO,YACfd,KAAKK,aAAeL,KAAKY,eACzBZ,KAAKH,aAAakB,SAAS,mBAC3Bf,KAAKL,OAAOmB,OACZ1B,QAAQ4B,QAxEQ,aAwEmBhB,KAAKC,WAOhDP,MAAMU,UAAUa,KAAO,WAChBjB,KAAKK,cACJL,KAAKH,aAAaqB,YAAY,mBAC9BlB,KAAKL,OAAOsB,OACZ7B,QAAQ4B,QAlFS,cAkFmBhB,KAAKC,WAQjDP,MAAMU,UAAUe,WAAa,SAAUC,SAC/BA,QACApB,KAAKc,OAELd,KAAKiB,QAQbvB,MAAMU,UAAUiB,aAAe,WAC3B,MAtG0B,eAyG9B/B,gBAAgBgC,oBAAoBlC,SAGpCA,QAAQM,MAAQA,MAEhBN,QAAQI,mBA/GiB,cAgHzBJ,QAAQG,kBAjHgB,aAkHxBH,QAAQK,wBAhHsB","sourcesContent":["/*\n * GNU AGPL-3.0 License\n *\n * Copyright (c) 2021 - present core.ai . All rights reserved.\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see https://opensource.org/licenses/AGPL-3.0.\n *\n */\n\n\n/*global fs, Phoenix, process*/\n/*eslint no-console: 0*/\n/*eslint strict: [\"error\", \"global\"]*/\n/* jshint ignore:start */\n\ndefine(function (require, exports, module) {\n\n    const EventDispatcher = require(\"utils/EventDispatcher\"),\n        EVENT_PANEL_SHOWN = \"panelShown\",\n        EVENT_PANEL_HIDDEN = \"panelHidden\",\n        PANEL_TYPE_PLUGIN_PANEL = \"pluginPanel\";\n\n    /**\n     * Represents a panel below the editor area (a child of \".content\").\n     * @constructor\n     * @param {!jQueryObject} $panel  The entire panel, including any chrome, already in the DOM.\n     * @param {!string} id  Unique id for this panel. Use package-style naming, e.g. \"myextension.panelname\". will\n     *      overwrite an existing panel id if present.\n     * @param {!jQueryObject} $toolbarIcon An icon that should be present in main-toolbar to associate this panel to.\n     *      The panel will be shown only if the icon is visible on the toolbar and the user clicks on the icon.\n     * @param {number=} minWidth  Minimum width of panel in px.\n     * @param {?number=} initialSize  Optional Initial size of panel in px. If not given, panel will use minsize\n     *      or current size.\n     */\n    function Panel($panel, id, $toolbarIcon, minWidth, initialSize) {\n        this.$panel = $panel;\n        this.panelID = id;\n        this.$toolbarIcon = $toolbarIcon;\n        this.minWidth = minWidth;\n        this.$mainPluginPanel = $(\"#main-plugin-panel\");\n        this.initialSize = initialSize;\n    }\n\n    /**\n     * Dom node holding the rendered panel\n     * @type {jQueryObject}\n     */\n    Panel.prototype.$panel = null;\n\n    /**\n     * Determines if the panel is visible\n     * @return {boolean} true if visible, false if not\n     */\n    Panel.prototype.isVisible = function () {\n        return this.$panel.is(\":visible\");\n    };\n\n    /**\n     * Registers a call back function that will be called just before panel is shown. The handler should return true\n     * if the panel can be shown, else return false and the panel will not be shown.\n     * @param {function|null} canShowHandlerFn function that should return true of false if the panel can be shown/not.\n     * or null to clear the handler.\n     * @return {boolean} true if visible, false if not\n     */\n    Panel.prototype.registerCanBeShownHandler = function (canShowHandlerFn) {\n        if(this.canBeShownHandler && canShowHandlerFn){\n            console.warn(`canBeShownHandler already registered for panel: ${this.panelID}. will be overwritten`);\n        }\n        this.canBeShownHandler = canShowHandlerFn;\n    };\n\n    /**\n     * Returns true if th panel can be shown, else false.\n     * @return {boolean}\n     */\n    Panel.prototype.canBeShown = function () {\n        let self = this;\n        if(self.canBeShownHandler){\n            return self.canBeShownHandler();\n        }\n        return true;\n    };\n\n    /**\n     * Shows the panel\n     */\n    Panel.prototype.show = function () {\n        if(!this.isVisible() && this.canBeShown()){\n            this.$toolbarIcon.addClass(\"selected-button\");\n            this.$panel.show();\n            exports.trigger(EVENT_PANEL_SHOWN, this.panelID);\n        }\n    };\n\n    /**\n     * Hides the panel\n     */\n    Panel.prototype.hide = function () {\n        if(this.isVisible()){\n            this.$toolbarIcon.removeClass(\"selected-button\");\n            this.$panel.hide();\n            exports.trigger(EVENT_PANEL_HIDDEN, this.panelID);\n        }\n    };\n\n    /**\n     * Sets the panel's visibility state\n     * @param {boolean} visible true to show, false to hide\n     */\n    Panel.prototype.setVisible = function (visible) {\n        if (visible) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    };\n\n    /**\n     * gets the Panle's type\n     * @return {string}\n     */\n    Panel.prototype.getPanelType = function () {\n        return PANEL_TYPE_PLUGIN_PANEL;\n    };\n\n    EventDispatcher.makeEventDispatcher(exports);\n\n    // Public API\n    exports.Panel = Panel;\n    //events\n    exports.EVENT_PANEL_HIDDEN = EVENT_PANEL_HIDDEN;\n    exports.EVENT_PANEL_SHOWN = EVENT_PANEL_SHOWN;\n    exports.PANEL_TYPE_PLUGIN_PANEL = PANEL_TYPE_PLUGIN_PANEL;\n});\n"],"file":"PluginPanelView.js"}