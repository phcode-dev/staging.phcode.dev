{"version":3,"sources":["thirdparty/CodeMirror/addon/selection/selection-pointer.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","mousemove","cm","event","data","state","selectionPointer","buttons","which","mouseX","mouseY","clientX","clientY","scheduleUpdate","mouseout","getWrapperElement","contains","relatedTarget","reset","rects","willUpdate","setTimeout","update","somethingSelected","sel","display","selectionDiv","firstChild","nextSibling","push","getBoundingClientRect","inside","i","length","rect","left","right","top","bottom","cursor","value","lineDiv","style","defineOption","val","off","window","windowScroll","on"],"mappings":"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","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"selectionPointer\", false, function(cm, val) {\n    var data = cm.state.selectionPointer;\n    if (data) {\n      CodeMirror.off(cm.getWrapperElement(), \"mousemove\", data.mousemove);\n      CodeMirror.off(cm.getWrapperElement(), \"mouseout\", data.mouseout);\n      CodeMirror.off(window, \"scroll\", data.windowScroll);\n      cm.off(\"cursorActivity\", reset);\n      cm.off(\"scroll\", reset);\n      cm.state.selectionPointer = null;\n      cm.display.lineDiv.style.cursor = \"\";\n    }\n    if (val) {\n      data = cm.state.selectionPointer = {\n        value: typeof val == \"string\" ? val : \"default\",\n        mousemove: function(event) { mousemove(cm, event); },\n        mouseout: function(event) { mouseout(cm, event); },\n        windowScroll: function() { reset(cm); },\n        rects: null,\n        mouseX: null, mouseY: null,\n        willUpdate: false\n      };\n      CodeMirror.on(cm.getWrapperElement(), \"mousemove\", data.mousemove);\n      CodeMirror.on(cm.getWrapperElement(), \"mouseout\", data.mouseout);\n      CodeMirror.on(window, \"scroll\", data.windowScroll);\n      cm.on(\"cursorActivity\", reset);\n      cm.on(\"scroll\", reset);\n    }\n  });\n\n  function mousemove(cm, event) {\n    var data = cm.state.selectionPointer;\n    if (event.buttons == null ? event.which : event.buttons) {\n      data.mouseX = data.mouseY = null;\n    } else {\n      data.mouseX = event.clientX;\n      data.mouseY = event.clientY;\n    }\n    scheduleUpdate(cm);\n  }\n\n  function mouseout(cm, event) {\n    if (!cm.getWrapperElement().contains(event.relatedTarget)) {\n      var data = cm.state.selectionPointer;\n      data.mouseX = data.mouseY = null;\n      scheduleUpdate(cm);\n    }\n  }\n\n  function reset(cm) {\n    cm.state.selectionPointer.rects = null;\n    scheduleUpdate(cm);\n  }\n\n  function scheduleUpdate(cm) {\n    if (!cm.state.selectionPointer.willUpdate) {\n      cm.state.selectionPointer.willUpdate = true;\n      setTimeout(function() {\n        update(cm);\n        cm.state.selectionPointer.willUpdate = false;\n      }, 50);\n    }\n  }\n\n  function update(cm) {\n    var data = cm.state.selectionPointer;\n    if (!data) return;\n    if (data.rects == null && data.mouseX != null) {\n      data.rects = [];\n      if (cm.somethingSelected()) {\n        for (var sel = cm.display.selectionDiv.firstChild; sel; sel = sel.nextSibling)\n          data.rects.push(sel.getBoundingClientRect());\n      }\n    }\n    var inside = false;\n    if (data.mouseX != null) for (var i = 0; i < data.rects.length; i++) {\n      var rect = data.rects[i];\n      if (rect.left <= data.mouseX && rect.right >= data.mouseX &&\n          rect.top <= data.mouseY && rect.bottom >= data.mouseY)\n        inside = true;\n    }\n    var cursor = inside ? data.value : \"\";\n    if (cm.display.lineDiv.style.cursor != cursor)\n      cm.display.lineDiv.style.cursor = cursor;\n  }\n});\n"],"file":"selection-pointer.js"}