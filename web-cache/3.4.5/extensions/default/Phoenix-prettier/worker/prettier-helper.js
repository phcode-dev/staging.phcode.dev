importScripts(`${Phoenix.baseURL}thirdparty/prettier/standalone.js`),importScripts(`${Phoenix.baseURL}thirdparty/prettier/parser-babel.js`),importScripts(`${Phoenix.baseURL}thirdparty/prettier/parser-html.js`),importScripts(`${Phoenix.baseURL}thirdparty/prettier/parser-postcss.js`),function(){function _identifyChangedRange(oldText,newText,start,end){let charsToEndIndex=oldText.length-end,newRangeStart=start,newRangeEnd=newText.length-charsToEndIndex,rangeEndInOldText=oldText.length-charsToEndIndex;return{text:newText,changedText:newText.substring(newRangeStart,newRangeEnd),rangeStart:newRangeStart,rangeEnd:newRangeEnd,rangeEndInOldText:rangeEndInOldText}}function prettify(params){let options=params.options||{};options.plugins=prettierPlugins;let isFullFileBeautify=!options.rangeStart||!options.rangeEnd;options.rangeStart=options.rangeStart||0,options.rangeEnd=options.rangeEnd||params.text.length;let prettyText=prettier.format(params.text,options);return isFullFileBeautify?{text:prettyText,cursorOffset:params.cursorOffset}:_identifyChangedRange(params.text,prettyText,options.rangeStart,options.rangeEnd)}let pluginURLS={php:`${Phoenix.baseURL}thirdparty/prettier/php/standalone.js`,yaml:`${Phoenix.baseURL}thirdparty/prettier/parser-yaml.js`,markdown:`${Phoenix.baseURL}thirdparty/prettier/parser-markdown.js`,typescript:`${Phoenix.baseURL}thirdparty/prettier/parser-typescript.js`},builtinPlugins=["babel","json-stringify","html","css","less","scss"];function _loadPlugin(pluginName){pluginURLS[pluginName]?importScripts(pluginURLS[pluginName]):builtinPlugins.includes(pluginName)||console.log("no plugin loaded for",pluginName)}WorkerComm.setExecHandler("prettify",prettify),WorkerComm.setExecHandler("loadPrettierPlugin",_loadPlugin)}();
//# sourceMappingURL=prettier-helper.js.map
