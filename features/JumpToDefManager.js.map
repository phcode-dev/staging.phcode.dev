{"version":3,"sources":["features/JumpToDefManager.js"],"names":["define","require","exports","module","Commands","Strings","AppInit","CommandManager","EditorManager","ProviderRegistrationHandler","_providerRegistrationHandler","RegistrationHandler","registerJumpToDefProvider","registerProvider","bind","removeJumpToDefProvider","removeProvider","_doJumpToDef","request","result","$","Deferred","jumpToDefProvider","editor","getActiveEditor","language","getLanguageForSelection","enabledProviders","getProvidersForLanguageId","getId","some","item","index","provider","canJumpToDef","doJumpToDef","done","resolve","fail","reject","promise","register","CMD_JUMPTO_DEFINITION","NAVIGATE_JUMPTO_DEFINITION"],"mappings":"AAuBAA,OAAO,SAAUC,QAASC,QAASC,QAG/B,IAAIC,SAAWH,QAAQ,oBACnBI,QAAUJ,QAAQ,WAClBK,QAAUL,QAAQ,iBAClBM,eAAiBN,QAAQ,0BACzBO,cAAgBP,QAAQ,wBACxBQ,4BAEAC,6BAA+B,IAAID,EAFLR,QAAQ,sCAAsCU,qBAG5EC,0BAA4BF,6BAA6BG,iBAAiBC,KAAKJ,8BAC/EK,wBAA0BL,6BAA6BM,eAAeF,KAAKJ,8BAQ/E,SAASO,eACL,IAAIC,QAAU,KACVC,OAAS,IAAIC,EAAEC,SACfC,kBAAoB,KACpBC,OAASf,cAAcgB,kBAE3B,GAAID,OAAQ,CAER,IAAIE,SAAWF,OAAOG,0BAClBC,iBAAmBjB,6BAA6BkB,0BAA0BH,SAASI,SAGtEC,KAAK,SAAUC,KAAMC,OAClC,GAAID,KAAKE,SAASC,aAAaX,QAE3B,OADAD,kBAAoBS,KAAKE,UAClB,IAIXX,oBACAJ,QAAUI,kBAAkBa,YAAYZ,SAGpCL,QAAQkB,KAAK,WACTjB,OAAOkB,YACRC,KAAK,WACJnB,OAAOoB,WAMfpB,OAAOoB,cAGXpB,OAAOoB,SAGX,OAAOpB,OAAOqB,UAGlBjC,eAAekC,SAASpC,QAAQqC,sBAAuBtC,SAASuC,2BAA4B1B,cAE5Ff,QAAQU,0BAA4BA,0BACpCV,QAAQa,wBAA0BA","sourcesContent":["/*\n * Copyright (c) 2019 - present Adobe. All rights reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n *\n */\n\ndefine(function (require, exports, module) {\n\n\n    var Commands = require(\"command/Commands\"),\n        Strings = require(\"strings\"),\n        AppInit = require(\"utils/AppInit\"),\n        CommandManager = require(\"command/CommandManager\"),\n        EditorManager = require(\"editor/EditorManager\"),\n        ProviderRegistrationHandler = require(\"features/PriorityBasedRegistration\").RegistrationHandler;\n\n    var _providerRegistrationHandler = new ProviderRegistrationHandler(),\n        registerJumpToDefProvider = _providerRegistrationHandler.registerProvider.bind(_providerRegistrationHandler),\n        removeJumpToDefProvider = _providerRegistrationHandler.removeProvider.bind(_providerRegistrationHandler);\n\n\n    /**\n     * Asynchronously asks providers to handle jump-to-definition.\n     * @return {!Promise} Resolved when the provider signals that it's done; rejected if no\n     * provider responded or the provider that responded failed.\n     */\n    function _doJumpToDef() {\n        var request = null,\n            result = new $.Deferred(),\n            jumpToDefProvider = null,\n            editor = EditorManager.getActiveEditor();\n\n        if (editor) {\n            // Find a suitable provider, if any\n            var language = editor.getLanguageForSelection(),\n                enabledProviders = _providerRegistrationHandler.getProvidersForLanguageId(language.getId());\n\n\n            enabledProviders.some(function (item, index) {\n                if (item.provider.canJumpToDef(editor)) {\n                    jumpToDefProvider = item.provider;\n                    return true;\n                }\n            });\n\n            if (jumpToDefProvider) {\n                request = jumpToDefProvider.doJumpToDef(editor);\n\n                if (request) {\n                    request.done(function () {\n                        result.resolve();\n                    }).fail(function () {\n                        result.reject();\n                    });\n                } else {\n                    result.reject();\n                }\n            } else {\n                result.reject();\n            }\n        } else {\n            result.reject();\n        }\n\n        return result.promise();\n    }\n\n    CommandManager.register(Strings.CMD_JUMPTO_DEFINITION, Commands.NAVIGATE_JUMPTO_DEFINITION, _doJumpToDef);\n\n    exports.registerJumpToDefProvider = registerJumpToDefProvider;\n    exports.removeJumpToDefProvider = removeJumpToDefProvider;\n});\n"],"file":"JumpToDefManager.js"}