const NEW_PROJECT_EXTENSION_INTERFACE="Extn.Phoenix.newProject",RECENT_PROJECTS_INTERFACE="Extn.Phoenix.recentProjects",selfFileName=location.href.split("?")[0].split("/").pop();function _getTranslatedString(templateStr){return templateStr.replace(/{{(\w*)}}/g,function(match,key){return window.Strings[key]?window.Strings[key]:key})}function _localiseWithBracketsStrings(){let allLocElements=document.getElementsByClassName("localize");for(let el of allLocElements){let stringToTranslate=el.textContent.trim();el.textContent=_getTranslatedString(stringToTranslate)}}function _addQueryString(url,queryString,value){return value?`${url}&${queryString}=${value}`:url}function getNewProjectFromURL(url,suggestedProjectName,title,{license:license,licenseURL:licenseURL,credits:credits,creditsURL:creditsURL,previewURL:previewURL,backURL:backURL}){let href=`new-project-from-url.html?url=${url}&suggestedName=${suggestedProjectName}&title=${title}`;return href=_addQueryString(href,"license",license),href=_addQueryString(href,"licenseURL",licenseURL),href=_addQueryString(href,"credits",credits),href=_addQueryString(href,"creditsURL",creditsURL),href=_addQueryString(href,"previewURL",previewURL),href=_addQueryString(href,"backURL",backURL)}function newProjectFromURLScreen(url,suggestedProjectName,title,{license:license,licenseURL:licenseURL,credits:credits,creditsURL:creditsURL,previewURL:previewURL,backURL:backURL}){let href=getNewProjectFromURL(url,suggestedProjectName,title,{license:license,licenseURL:licenseURL,credits:credits,creditsURL:creditsURL,previewURL:previewURL,backURL:backURL});window.location.href=href}function getPhoenixAbsURL(relativePath){return relativePath?relativePath.startsWith("http://")||relativePath.startsWith("https://")?relativePath:`${window.parent.Phoenix.baseURL}${relativePath}`:null}function init(){_localiseWithBracketsStrings(),document.getElementById("closeDialogueButton").onclick=function(){window.newProjectExtension.closeDialogue(),Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"close.click",selfFileName)},document.getElementById("top").onkeydown=function(e){let acceptedCode=!1;"Escape"===e.code?(window.newProjectExtension.closeDialogue(),acceptedCode=!0):"ArrowRight"===e.code&&"INPUT"!==e.target.tagName?($.tabNext(),acceptedCode=!0):"ArrowLeft"===e.code&&"INPUT"!==e.target.tagName?($.tabPrev(),acceptedCode=!0):"Tab"===e.code&&"INPUT"!==e.target.tagName&&(acceptedCode=!0),acceptedCode&&Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"keyboardNav",selfFileName)},$(".tabable").focus(function(el){$(el.target).addClass("active")}).blur(function(el){$(el.target).removeClass("active")}),$("#focusguard-2").on("focus",function(){$("#firstInputTabIndex").focus()})}window.Strings=window.parent.Strings,window.path=window.parent.path,window.parent.ExtensionInterface.waitAndGetExtensionInterface("Extn.Phoenix.newProject").then(interfaceObj=>{window.newProjectExtension=interfaceObj,window.Metrics=window.newProjectExtension.Metrics,Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"shown",selfFileName)}),window.parent.ExtensionInterface.waitAndGetExtensionInterface(RECENT_PROJECTS_INTERFACE).then(interfaceObj=>{window.recentProjectExtension=interfaceObj});
//# sourceMappingURL=phoenix.js.map
