let createProjectBtn,locationInput,projectNameInput,createProjectWithNameBtn;const urlSearchParams=new URLSearchParams(window.location.search),params=Object.fromEntries(urlSearchParams.entries()),PARAM_SUGGESTED_NAME=params.suggestedName||"project",PARAM_SUGGESTED_TITLE=params.title||Strings.CMD_PROJECT_NEW,PARAM_SUGGESTED_URL=params.url,FLATTEN_ZIP_FIRST_LEVEL_DIR="true"===params.flattenZipFirstLevel,LICENSE=params.license,LICENSE_URL=params.licenseURL,CREDITS=params.credits,CREDITS_URL=params.creditsURL,PREVIEW_URL=params.previewURL,BACK_URL=params.backURL;function _validateProjectLocation(){if(!window.showDirectoryPicker)return $(document.getElementById("projectLocation")).addClass("forced-hidden"),!0;let location;return locationInput.value===Strings.PLEASE_SELECT_A_FOLDER?($(locationInput).addClass("error-border"),!1):($(locationInput).removeClass("error-border"),!0)}async function _validateSuggestedName(){let suggestedName=projectNameInput.value;await newProjectExtension.alreadyExists(suggestedName)?$(projectNameInput).addClass("error-border"):$(projectNameInput).removeClass("error-border")}function _selectFolder(){newProjectExtension.showFolderSelect().then(file=>{locationInput.fullPath=file,locationInput.value=file.replace(newProjectExtension.getMountDir(),""),_validateProjectLocation()})}function _createProjectClicked(){_validateProjectLocation()?newProjectExtension.downloadAndOpenProject(PARAM_SUGGESTED_URL,locationInput.fullPath,PARAM_SUGGESTED_NAME,FLATTEN_ZIP_FIRST_LEVEL_DIR).then(()=>{Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"createProject.Click","create.success"),newProjectExtension.closeDialogue()}):newProjectExtension.showErrorDialogue(Strings.MISSING_FIELDS,Strings.PLEASE_FILL_ALL_REQUIRED),Metrics.countEvent(Metrics.EVENT_TYPE.NEW_PROJECT,"createProject.Click","create")}function _showLicensingInfo(){if(LICENSE||LICENSE_URL){$(document.getElementById("License")).removeClass("forced-hidden");let el=document.getElementById("licenseLink");el.textContent=LICENSE||LICENSE_URL;let licenseURL=LICENSE_URL||"#";el.href=licenseURL,"#"===licenseURL&&$(el).attr("target","")}if(CREDITS||CREDITS_URL){$(document.getElementById("Credits")).removeClass("forced-hidden");let el=document.getElementById("creditsLink");el.textContent=CREDITS||CREDITS_URL;let creditsURL=CREDITS_URL||"#";el.href=creditsURL,"#"===creditsURL&&$(el).attr("target","")}}function _showPreview(){PREVIEW_URL&&($(document.getElementById("previewBox")).removeClass("forced-hidden"),document.getElementById("bigFrame").src=PREVIEW_URL,document.getElementById("littleFrame").src=PREVIEW_URL)}function _setupNavigation(){BACK_URL&&(document.getElementById("backButton").href=BACK_URL)}function initNewProjectFromURL(){_setupNavigation(),window.showDirectoryPicker?$(document.getElementById("projectName")).addClass("forced-hidden"):$(document.getElementById("projectLocation")).addClass("forced-hidden"),document.getElementById("titleNewProject").textContent=PARAM_SUGGESTED_TITLE,projectNameInput=document.getElementById("projectNameInput"),locationInput=document.getElementById("locationInput"),createProjectBtn=document.getElementById("createProjectBtn"),createProjectWithNameBtn=document.getElementById("createProjectWithNameBtn"),createProjectBtn.onclick=_createProjectClicked,createProjectWithNameBtn.onclick=_createProjectClicked,$(projectNameInput).keyup(_validateSuggestedName),locationInput.value=Strings.PLEASE_SELECT_A_FOLDER,projectNameInput.value=PARAM_SUGGESTED_NAME,locationInput.onclick=_selectFolder,_showLicensingInfo(),_showPreview(),_validateProjectLocation(),_validateSuggestedName()}
//# sourceMappingURL=new-project-from-url.js.map
