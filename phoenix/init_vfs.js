function _setupVFS(Phoenix,fsLib,pathLib){return Phoenix.VFS={getRootDir:()=>"/fs/",getMountDir:()=>"/mnt/",getAppSupportDir:()=>"/fs/app/",getLocalDir:()=>"/fs/local/",getTrashDir:()=>"/fs/trash/",getDefaultProjectDir:()=>"/fs/local/default project/",getUserDocumentsDirectory:()=>"/fs/local/Documents/",ensureExistsDir:function(path,cb){Phoenix.VFS.exists(path,exists=>{exists?cb():fs.mkdirs(path,777,!0,function(err){err&&"EEXIST"!==err.code&&cb(err),cb()})})},ensureExistsDirAsync:async function(path){return new Promise((resolve,reject)=>{Phoenix.VFS.ensureExistsDir(path,err=>{err?reject(err):resolve()})})},exists:function(path,cb){fs.stat(path,function(err,stats){cb(!(!stats||err))})},existsAsync:async function(path){return new Promise(resolve=>{Phoenix.VFS.exists(path,exists=>{resolve(exists)})})},fs:fsLib,path:pathLib,getFsEncoding:_getFsEncoding},Phoenix.fs=fsLib,Phoenix.path=pathLib,Phoenix.VFS}const _getFsEncoding=function(encoding){const encodingStr=encoding.toLowerCase();switch(encodingStr){case"utf8":case"utf-8":return"utf8";case"ascii":return"ascii";case"hex":return"hex";case"ucs2":case"ucs-2":return"ucs2";case"utf16le":case"utf-16le":return"utf16le";case"binary":return"binary";case"latin1":return"latin1";case"ISO8859-1":return"ISO8859-1"}return encoding},_FS_ERROR_MESSAGE="Oops. Phoenix could not be started due to missing file system library.",alertError=function(message,err){throw window.alert(message),new Error(err||message)},errorCb=function(err){err&&alertError(_FS_ERROR_MESSAGE,err)},_createAppDirs=function(vfs){vfs.ensureExistsDir(vfs.getRootDir(),errorCb),vfs.ensureExistsDir(vfs.getAppSupportDir(),errorCb),vfs.ensureExistsDir(vfs.getLocalDir(),errorCb),vfs.ensureExistsDir(vfs.getTrashDir(),errorCb)},_SAMPLE_HTML="<!DOCTYPE html>\n<html>\n    <head>\n        <title>Phoenix Editor for the web</title>\n    </head>\n \n    <body>\n        <h1>Welcome to Phoenix</h1>\n        <p> Phoenix is in alpha and is under active development.</p>\n        <p> Use Google Chrome/ Microsoft Edge/ Opera browser for opening projects in your system using the \n         [File Menu > Open Folder] Option or by pressing Ctrl+Shift+O/ cmd+shift+O shortcut</p>\n    </body>\n</html>",_createDefaultProject=function(vfs,Phoenix){let projectDir=vfs.getDefaultProjectDir();Phoenix.firstBoot=!1,vfs.exists(projectDir,exists=>{exists||vfs.ensureExistsDir(projectDir,err=>{errorCb(err);let indexFile=vfs.path.normalize(`${projectDir}/index.html`);Phoenix.firstBoot=!0,fs.writeFile(indexFile,_SAMPLE_HTML,"utf8",errorCb)})})};export default function init(Phoenix){window.fs&&window.path&&Phoenix||alertError(_FS_ERROR_MESSAGE);const vfs=_setupVFS(Phoenix,window.fs,window.path);_createAppDirs(vfs),_createDefaultProject(vfs,Phoenix)}
//# sourceMappingURL=init_vfs.js.map
