{"version":3,"sources":["thirdparty/CodeMirror/addon/tern/worker.js"],"names":["server","this","onmessage","e","data","type","startServer","defs","plugins","scripts","addFile","name","text","delFile","request","body","err","reqData","postMessage","id","String","c","pending","Error","nextId","getFile","file","importScripts","apply","tern","Server","async","console","log","v","message"],"mappings":"AAKA,IAAIA,OAEJC,KAAKC,UAAY,SAASC,GACxB,IAAIC,KAAOD,EAAEC,KACb,OAAQA,KAAKC,MACb,IAAK,OAAQ,OAAOC,YAAYF,KAAKG,KAAMH,KAAKI,QAASJ,KAAKK,SAC9D,IAAK,MAAO,OAAOT,OAAOU,QAAQN,KAAKO,KAAMP,KAAKQ,MAClD,IAAK,MAAO,OAAOZ,OAAOa,QAAQT,KAAKO,MACvC,IAAK,MAAO,OAAOX,OAAOc,QAAQV,KAAKW,KAAM,SAASC,IAAKC,SACzDC,YAAY,CAACC,GAAIf,KAAKe,GAAIJ,KAAME,QAASD,IAAKA,KAAOI,OAAOJ,SAE9D,IAAK,UACH,IAAIK,EAAIC,QAAQlB,KAAKe,IAErB,cADOG,QAAQlB,KAAKe,IACbE,EAAEjB,KAAKY,IAAKZ,KAAKQ,MAC1B,QAAS,MAAM,IAAIW,MAAM,yBAA2BnB,KAAKC,QAI3D,IAAImB,OAAS,EAAGF,QAAU,GAC1B,SAASG,QAAQC,KAAML,GACrBH,YAAY,CAACb,KAAM,UAAWM,KAAMe,KAAMP,KAAMK,SAChDF,QAAQE,QAAUH,EAGpB,SAASf,YAAYC,KAAMC,QAASC,SAC9BA,SAASkB,cAAcC,MAAM,KAAMnB,SAEvCT,OAAS,IAAI6B,KAAKC,OAAO,CACvBL,QAASA,QACTM,OAAO,EACPxB,KAAMA,KACNC,QAASA,UAIbP,KAAK+B,QAAU,CACbC,IAAK,SAASC,GAAKhB,YAAY,CAACb,KAAM,QAAS8B,QAASD","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// declare global: tern, server\n\nvar server;\n\nthis.onmessage = function(e) {\n  var data = e.data;\n  switch (data.type) {\n  case \"init\": return startServer(data.defs, data.plugins, data.scripts);\n  case \"add\": return server.addFile(data.name, data.text);\n  case \"del\": return server.delFile(data.name);\n  case \"req\": return server.request(data.body, function(err, reqData) {\n    postMessage({id: data.id, body: reqData, err: err && String(err)});\n  });\n  case \"getFile\":\n    var c = pending[data.id];\n    delete pending[data.id];\n    return c(data.err, data.text);\n  default: throw new Error(\"Unknown message type: \" + data.type);\n  }\n};\n\nvar nextId = 0, pending = {};\nfunction getFile(file, c) {\n  postMessage({type: \"getFile\", name: file, id: ++nextId});\n  pending[nextId] = c;\n}\n\nfunction startServer(defs, plugins, scripts) {\n  if (scripts) importScripts.apply(null, scripts);\n\n  server = new tern.Server({\n    getFile: getFile,\n    async: true,\n    defs: defs,\n    plugins: plugins\n  });\n}\n\nthis.console = {\n  log: function(v) { postMessage({type: \"debug\", message: v}); }\n};\n"],"file":"worker.js"}