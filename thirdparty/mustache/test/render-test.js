require("./helper");var fs=require("fs"),path=require("path"),_files=path.join(__dirname,"_files");function getContents(testName,ext){return fs.readFileSync(path.join(_files,testName+"."+ext),"utf8")}function getView(testName){var view=getContents(testName,"js");if(!view)throw new Error('Cannot find view for test "'+testName+'"');return eval(view)}function getPartial(testName){try{return getContents(testName,"partial")}catch(e){}}function getTest(testName){var test={};return test.view=getView(testName),test.template=getContents(testName,"mustache"),test.partial=getPartial(testName),test.expect=getContents(testName,"txt"),test}var testToRun=process.env.TEST,testNames;testNames=testToRun?[testToRun]:fs.readdirSync(_files).filter(function(file){return/\.js$/.test(file)}).map(function(file){return path.basename(file).replace(/\.js$/,"")}),describe("Mustache.render",function(){beforeEach(function(){Mustache.clearCache()}),testNames.forEach(function(testName){var test=getTest(testName);it("knows how to render "+testName,function(){var output;output=test.partial?Mustache.render(test.template,test.view,{partial:test.partial}):Mustache.render(test.template,test.view),assert.equal(output,test.expect)})})});
//# sourceMappingURL=render-test.js.map
