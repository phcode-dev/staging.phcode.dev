{"version":3,"sources":["LiveDevelopment/Agents/ConsoleAgent.js"],"names":["define","ConsoleAgent","require","exports","module","Inspector","_lastMessage","_log","message","level","text","url","stackTrace","callFrame","functionName","columnNumber","console","_onMessageAdded","event","res","_onMessageRepeatCountUpdated","_onMessagesCleared","enable","Console","load","on","unload","off"],"mappings":"AAyBAA,OAAO,SAASC,aAAaC,QAASC,QAASC,QAG3C,IAAIC,UAAYH,QAAQ,uCAEpBI,aAKJ,SAASC,KAAKC,SACV,IAAIC,MAAQD,QAAQC,MACN,YAAVA,QACAA,MAAQ,QAEZ,IAAIC,KAAO,iBAAmBF,QAAQE,KAItC,GAHIF,QAAQG,MACRD,MAAQ,UAAYF,QAAQG,IAAM,KAElCH,QAAQI,WAAY,CACpB,IAAIC,UAAYL,QAAQI,WAAW,GACnCF,MAAQ,OAASG,UAAUC,aAAe,IAAMD,UAAUE,aAE9DC,QAAQP,OAAOC,MAInB,SAASO,gBAAgBC,MAAOC,KAG5BZ,KADAD,aAAea,IAAIX,SAKvB,SAASY,6BAA6BF,MAAOC,KAErCb,cACAC,KAAKD,cAKb,SAASe,mBAAmBH,MAAOC,MAQnC,SAASG,SACL,OAAOjB,UAAUkB,QAAQD,SAI7B,SAASE,OACLnB,UAAUkB,QACLE,GAAG,4BAA6BR,iBAChCQ,GAAG,yCAA0CL,8BAC7CK,GAAG,+BAAgCJ,oBAI5C,SAASK,SACLrB,UAAUkB,QAAQI,IAAI,iBAI1BxB,QAAQmB,OAASA,OACjBnB,QAAQqB,KAAOA,KACfrB,QAAQuB,OAASA","sourcesContent":["/*\n * GNU AGPL-3.0 License\n *\n * Copyright (c) 2021 - present core.ai . All rights reserved.\n * Original work Copyright (c) 2012 - 2021 Adobe Systems Incorporated. All rights reserved.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License\n * for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see https://opensource.org/licenses/AGPL-3.0.\n *\n */\n\n/**\n * ConsoleAgent forwards all console message from the remote console to the\n * local console.\n */\ndefine(function ConsoleAgent(require, exports, module) {\n\n\n    var Inspector = require(\"LiveDevelopment/Inspector/Inspector\");\n\n    var _lastMessage; // {Console.ConsoleMessage} the last received message\n\n    /** Log a remote message to the local console\n     * @param {Console.ConsoleMessage} message\n     */\n    function _log(message) {\n        var level = message.level;\n        if (level === \"warning\") {\n            level = \"warn\";\n        }\n        var text = \"ConsoleAgent: \" + message.text;\n        if (message.url) {\n            text += \" (url: \" + message.url + \")\";\n        }\n        if (message.stackTrace) {\n            var callFrame = message.stackTrace[0];\n            text += \" in \" + callFrame.functionName + \":\" + callFrame.columnNumber;\n        }\n        console[level](text);\n    }\n\n    // WebInspector Event: Console.messageAdded\n    function _onMessageAdded(event, res) {\n        // res = {message}\n        _lastMessage = res.message;\n        _log(_lastMessage);\n    }\n\n    // WebInspector Event: Console.messageRepeatCountUpdated\n    function _onMessageRepeatCountUpdated(event, res) {\n        // res = {count}\n        if (_lastMessage) {\n            _log(_lastMessage);\n        }\n    }\n\n    // WebInspector Event: Console.messagesCleared\n    function _onMessagesCleared(event, res) {\n        // res = {}\n    }\n\n    /**\n     * Enable the inspector Console domain\n     * @return {jQuery.Promise} A promise resolved when the Console.enable() command is successful.\n     */\n    function enable() {\n        return Inspector.Console.enable();\n    }\n\n    /** Initialize the agent */\n    function load() {\n        Inspector.Console\n            .on(\"messageAdded.ConsoleAgent\", _onMessageAdded)\n            .on(\"messageRepeatCountUpdated.ConsoleAgent\", _onMessageRepeatCountUpdated)\n            .on(\"messagesCleared.ConsoleAgent\", _onMessagesCleared);\n    }\n\n    /** Clean up */\n    function unload() {\n        Inspector.Console.off(\".ConsoleAgent\");\n    }\n\n    // Export public functions\n    exports.enable = enable;\n    exports.load = load;\n    exports.unload = unload;\n});\n"],"file":"ConsoleAgent.js"}